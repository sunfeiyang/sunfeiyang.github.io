{"title":"Maven-Nexus 私服部署发布报错","num_read":483,"num_like":197,"num_collection":853,"num_comments":120,"slug":"resource-RPC-Docker-Centos-Docker-nexus-error","date":"2020-12-16T16:00:00.000Z","img":"/img/header_img/docker/docker.jpg","_id":"clhrbp2fn00eoo5lg08sb1s3p","project":"RPC","site":{"data":{}},"updated":"2022-09-20T02:06:30.715Z","author":"Sunfy","comments":true,"path":"api/articles/resource-RPC-Docker-Centos-Docker-nexus-error.json","webPath":"2020/12/17/resource-RPC-Docker-Centos-Docker-nexus-error/","permalink":"https://sunfy9.gitee.io/2020/12/17/resource-RPC-Docker-Centos-Docker-nexus-error/","excerpt":"我在部署构件至 maven nexus 私服时，有时会出现 Failed to deploy artifacts: Failed to transfer file: … Return code is: 4XX, ReasonPhrase: … 类似这样的错误，那么这些错误是怎么产生，又如何解决呢？我在此将自己在部署过程中遇到的错误整理汇总一下，供大家参阅，希望对大家有所帮助。","covers":["../../../../img/Centos-Docker-nexus-error/image-20210227183953959.png","../../../../img/Centos-Docker-nexus-error/image-20210227183839572.png","../../../../img/Centos-Docker-nexus-error/image-20210227183901906.png"],"keywords":"sunfy, hexo-theme-snail","content":"<p>我在部署构件至 maven nexus 私服时，有时会出现 Failed to deploy artifacts: Failed to transfer file: … Return code is: 4XX, ReasonPhrase: … 类似这样的错误，那么这些错误是怎么产生，又如何解决呢？我在此将自己在部署过程中遇到的错误整理汇总一下，供大家参阅，希望对大家有所帮助。<a id=\"more\"></a></p>\n<h3 id=\"一、错误的请求。\"><a href=\"#一、错误的请求。\" class=\"headerlink\" title=\"一、错误的请求。\"></a><strong>一、错误的请求。</strong></h3><p>出现这个问题首先要确认上传的jar包的版本号</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;version&gt;0.0.1-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class=\"line\">如果这个版本号有SNAPSHOT 这时会上传到 maven-snapshot上，只是一个快照，如果此时上传快照版本这个时候必须要配置快照版本的配置，否则会出现400错误</span><br></pre></td></tr></table></figure>\n<p><strong>Return code is: 400, ReasonPhrase: Bad Request.</strong></p>\n<p><img src=\"../../../../img/Centos-Docker-nexus-error/image-20210227183953959.png\" alt=\"image-20210227183953959\"></p>\n<p>　　具体错误信息如下所示：　　</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] BUILD FAILURE</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] Total time: 5.135 s</span><br><span class=\"line\">[INFO] Finished at: 2016-02-18T10:23:58+08:00</span><br><span class=\"line\">[INFO] Final Memory: 19M&#x2F;174M</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.8.2:deploy (default-deploy) on project xeger: </span><br><span class=\"line\">        Failed to deploy artifacts: Could not transfer artifact nl.flotsam:xeger:jar:1.0.2 from&#x2F;to nexus-releases </span><br><span class=\"line\">        (http:&#x2F;&#x2F;localhost:8081&#x2F;nexus&#x2F;content&#x2F;repositories&#x2F;releases&#x2F;): </span><br><span class=\"line\">        Failed to transfer file: http:&#x2F;&#x2F;localhost:8081&#x2F;nexus&#x2F;content&#x2F;repositories&#x2F;releases&#x2F;nl&#x2F;flotsam&#x2F;xeger&#x2F;1.0.2&#x2F;xeger-1.0.2.jar. </span><br><span class=\"line\">        Return code is: 400, ReasonPhrase: Bad Request. -&gt; [Help 1]</span><br><span class=\"line\">[ERROR]</span><br><span class=\"line\">[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.</span><br><span class=\"line\">[ERROR] Re-run Maven using the -X switch to enable full debug logging.</span><br><span class=\"line\">[ERROR]</span><br><span class=\"line\">[ERROR] For more information about the errors and possible solutions, please read the following articles:</span><br><span class=\"line\">[ERROR] [Help 1] http:&#x2F;&#x2F;cwiki.apache.org&#x2F;confluence&#x2F;display&#x2F;MAVEN&#x2F;MojoExecutionException</span><br></pre></td></tr></table></figure>\n<p>　400错误的含义是“错误的请求”，在这里的原因是往往是没有部署到nexus的仓库中。产生原因有如下两种：<sunfy-line></p>\n<p>　　1、部署仓库错误：</p>\n<p>　　前面的博文有讲过 Nexus 私服有三种仓库类型：Hosted、Proxy和Virtual，另外还有一个 group （仓库组）用于对多个仓库进行组合。部署的时候只能部署到 Hosted 类型的宿主仓库中，如果是其他类型就会出现这个 400 错误。若是出现这个错误，只需修改 POM 文件中的部署仓库到对应的宿主仓库即可解决此问题。</p>\n<p>　　2、宿主仓库不允许重复部署：<br>　　默认情况下重复部署构件到 Releases 仓库中也会出现 400 错误，原因是 Nexus 私服中 Releases 仓库默认的 Deployment Policy 是 “Disable Redeploy”，所以当你重复部署构件至 Releases 宿主仓库时就会出现这个 400 错误。出现这个问题，只需要将宿主仓库的 Deployment Policy 改为 “” 即可解决，解决方法如下所示：</p>\n<p><img src=\"../../../../img/Centos-Docker-nexus-error/image-20210227183839572.png\" alt=\"image-20210227183839572\"></p>\n<h3 id=\"二、未认证或认证不通过。\"><a href=\"#二、未认证或认证不通过。\" class=\"headerlink\" title=\"二、未认证或认证不通过。\"></a><strong>二、未认证或认证不通过。</strong></h3><p><strong>Return code is: 401, ReasonPhrase: Unauthorized.</strong></p>\n<p><img src=\"../../../../img/Centos-Docker-nexus-error/image-20210227183901906.png\" alt=\"image-20210227183901906\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] BUILD FAILURE</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] Total time: 2.215 s</span><br><span class=\"line\">[INFO] Finished at: 2016-02-18T10:50:56+08:00</span><br><span class=\"line\">[INFO] Final Memory: 19M&#x2F;175M</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.8.2:deploy (default-deploy) on project xeger: </span><br><span class=\"line\">        Failed to deploy artifacts: Could not transfer artifact nl.flotsam:xeger:jar:1.0.2 from&#x2F;to nexus-releases </span><br><span class=\"line\">        (http:&#x2F;&#x2F;localhost:8081&#x2F;nexus&#x2F;content&#x2F;repositories&#x2F;releases&#x2F;): Failed to transfer file: </span><br><span class=\"line\">        http:&#x2F;&#x2F;localhost:8081&#x2F;nexus&#x2F;content&#x2F;repositories&#x2F;releases&#x2F;nl&#x2F;flotsam&#x2F;xeger&#x2F;1.0.2&#x2F;xeger-1.0.2.jar. </span><br><span class=\"line\">        Return code is: 401, ReasonPhrase: Unauthorized. -&gt; [Help 1]</span><br><span class=\"line\">[ERROR]</span><br><span class=\"line\">[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.</span><br><span class=\"line\">[ERROR] Re-run Maven using the -X switch to enable full debug logging.</span><br><span class=\"line\">[ERROR]</span><br><span class=\"line\">[ERROR] For more information about the errors and possible solutions, please read the following articles:</span><br><span class=\"line\">[ERROR] [Help 1] http:&#x2F;&#x2F;cwiki.apache.org&#x2F;confluence&#x2F;display&#x2F;MAVEN&#x2F;MojoExecutionException</span><br></pre></td></tr></table></figure>\n<p>　　出现这种错误，原因如下所示：</p>\n<p>　　1、是未配置 Nexus 私服用户信息，或配置的账号、密码错误，均会出现 401 的错误，解决方法就是修改 maven settings.xml 配置文件，添加如下信息即可解决问题。　　</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class=\"line\">&lt;settings xmlns&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;SETTINGS&#x2F;1.0.0&quot;</span><br><span class=\"line\">        xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class=\"line\">        xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;SETTINGS&#x2F;1.0.0 http:&#x2F;&#x2F;maven.apache.org&#x2F;xsd&#x2F;settings-1.0.0.xsd&quot;&gt;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    &lt;servers&gt;</span><br><span class=\"line\">        &lt;!-- Nexus 构件部署用户信息 --&gt;</span><br><span class=\"line\">        &lt;server&gt;</span><br><span class=\"line\">            &lt;id&gt;nexus-releases&lt;&#x2F;id&gt;</span><br><span class=\"line\">            &lt;username&gt;fanfengping&lt;&#x2F;username&gt;</span><br><span class=\"line\">            &lt;password&gt;密码&lt;&#x2F;password&gt;</span><br><span class=\"line\">        &lt;&#x2F;server&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;server&gt;</span><br><span class=\"line\">            &lt;id&gt;nexus-snapshots&lt;&#x2F;id&gt;</span><br><span class=\"line\">            &lt;username&gt;fanfengping&lt;&#x2F;username&gt;</span><br><span class=\"line\">            &lt;password&gt;密码&lt;&#x2F;password&gt;</span><br><span class=\"line\">        &lt;&#x2F;server&gt;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &lt;&#x2F;servers&gt;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&lt;&#x2F;settings&gt;</span><br></pre></td></tr></table></figure>\n<p>　　2、是 maven 项目工程 POM 文件中配置的 Nexus 私服宿主仓库的 project.distributionManagement.[repository|snapshotRepository].id 在 maven settings.xml 中配置的宿主仓库 settings.servers.server.id 不存在，统一二者的 ID 后，即可解决此问题。</p>\n<h3 id=\"三、连接失败。\"><a href=\"#三、连接失败。\" class=\"headerlink\" title=\"三、连接失败。\"></a><strong>三、连接失败。</strong></h3><p><strong>Connection refused: connect. 或 \\</strong>Return code is: 405*<em>*</em></p>\n<p>　　出现这种错误，肯定是 POM 文件中配置的 url 错误，认真检查一下 url 是否正确，然后订正一下，重新部署即可。</p>\n<h3 id=\"四、缺失私服仓库连接配置。\"><a href=\"#四、缺失私服仓库连接配置。\" class=\"headerlink\" title=\"四、缺失私服仓库连接配置。\"></a><strong>四、缺失私服仓库连接配置。</strong></h3><p><strong>Deployment failed: repository element was not specified in the POM inside distributionManagement element or in -DaltDeploymentRepository=id::layout::url parameter</strong></p>\n<p>　　具体提示信息如下所示：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] BUILD FAILURE</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] Total time: 1.969 s</span><br><span class=\"line\">[INFO] Finished at: 2016-02-18T10:47:22+08:00</span><br><span class=\"line\">[INFO] Final Memory: 18M&#x2F;177M</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.8.2:deploy (default-deploy) on project xeger: </span><br><span class=\"line\">        Deployment failed: repository element was not specified in the POM inside distributionManagement element </span><br><span class=\"line\">        or in -DaltDeploymentRepository&#x3D;id::layout::url parameter -&gt; [Help 1]</span><br><span class=\"line\">[ERROR]</span><br><span class=\"line\">[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.</span><br><span class=\"line\">[ERROR] Re-run Maven using the -X switch to enable full debug logging.</span><br><span class=\"line\">[ERROR]</span><br><span class=\"line\">[ERROR] For more information about the errors and possible solutions, please read the following articles:</span><br><span class=\"line\">[ERROR] [Help 1] http:&#x2F;&#x2F;cwiki.apache.org&#x2F;confluence&#x2F;display&#x2F;MAVEN&#x2F;MojoExecutionException</span><br></pre></td></tr></table></figure>\n<p>　　此问题是因 POM 文件遗漏了 Nexus 私服连接配置导致的，在 POM 文件中添加 distributionManagement 节点或者在命令行执行时添加 -DaltDeploymentRepository=id::layout::url 参数即可解决。POM 文件中添加 distributionManagement 如下所示：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;project&gt;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;developers&gt;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &lt;&#x2F;developers&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;distributionManagement&gt;</span><br><span class=\"line\">        &lt;repository&gt;</span><br><span class=\"line\">            &lt;id&gt;nexus-releases&lt;&#x2F;id&gt;</span><br><span class=\"line\">            &lt;name&gt;Nexus Releases Repository Pro&lt;&#x2F;name&gt;</span><br><span class=\"line\">            &lt;url&gt;http:&#x2F;&#x2F;localhost:8081&#x2F;nexus&#x2F;content&#x2F;repositories&#x2F;releases&#x2F;&lt;&#x2F;url&gt;</span><br><span class=\"line\">        &lt;&#x2F;repository&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;snapshotRepository&gt;</span><br><span class=\"line\">            &lt;id&gt;nexus-snapshots&lt;&#x2F;id&gt;</span><br><span class=\"line\">            &lt;name&gt;Nexus Snapshots Repository Pro&lt;&#x2F;name&gt;</span><br><span class=\"line\">            &lt;url&gt;http:&#x2F;&#x2F;localhost:8081&#x2F;nexus&#x2F;content&#x2F;repositories&#x2F;snapshots&#x2F;&lt;&#x2F;url&gt;</span><br><span class=\"line\">        &lt;&#x2F;snapshotRepository&gt;</span><br><span class=\"line\">    &lt;&#x2F;distributionManagement&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;dependencies&gt;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &lt;&#x2F;dependencies&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;build&gt;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &lt;&#x2F;build&gt;</span><br><span class=\"line\">&lt;&#x2F;project&gt;</span><br></pre></td></tr></table></figure>","more":"</p>\n<h3 id=\"一、错误的请求。\"><a href=\"#一、错误的请求。\" class=\"headerlink\" title=\"一、错误的请求。\"></a><strong>一、错误的请求。</strong></h3><p>出现这个问题首先要确认上传的jar包的版本号</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;version&gt;0.0.1-SNAPSHOT&lt;&#x2F;version&gt;</span><br><span class=\"line\">如果这个版本号有SNAPSHOT 这时会上传到 maven-snapshot上，只是一个快照，如果此时上传快照版本这个时候必须要配置快照版本的配置，否则会出现400错误</span><br></pre></td></tr></table></figure>\n<p><strong>Return code is: 400, ReasonPhrase: Bad Request.</strong></p>\n<p><img src=\"../../../../img/Centos-Docker-nexus-error/image-20210227183953959.png\" alt=\"image-20210227183953959\"></p>\n<p>　　具体错误信息如下所示：　　</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] BUILD FAILURE</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] Total time: 5.135 s</span><br><span class=\"line\">[INFO] Finished at: 2016-02-18T10:23:58+08:00</span><br><span class=\"line\">[INFO] Final Memory: 19M&#x2F;174M</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.8.2:deploy (default-deploy) on project xeger: </span><br><span class=\"line\">        Failed to deploy artifacts: Could not transfer artifact nl.flotsam:xeger:jar:1.0.2 from&#x2F;to nexus-releases </span><br><span class=\"line\">        (http:&#x2F;&#x2F;localhost:8081&#x2F;nexus&#x2F;content&#x2F;repositories&#x2F;releases&#x2F;): </span><br><span class=\"line\">        Failed to transfer file: http:&#x2F;&#x2F;localhost:8081&#x2F;nexus&#x2F;content&#x2F;repositories&#x2F;releases&#x2F;nl&#x2F;flotsam&#x2F;xeger&#x2F;1.0.2&#x2F;xeger-1.0.2.jar. </span><br><span class=\"line\">        Return code is: 400, ReasonPhrase: Bad Request. -&gt; [Help 1]</span><br><span class=\"line\">[ERROR]</span><br><span class=\"line\">[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.</span><br><span class=\"line\">[ERROR] Re-run Maven using the -X switch to enable full debug logging.</span><br><span class=\"line\">[ERROR]</span><br><span class=\"line\">[ERROR] For more information about the errors and possible solutions, please read the following articles:</span><br><span class=\"line\">[ERROR] [Help 1] http:&#x2F;&#x2F;cwiki.apache.org&#x2F;confluence&#x2F;display&#x2F;MAVEN&#x2F;MojoExecutionException</span><br></pre></td></tr></table></figure>\n<p>　400错误的含义是“错误的请求”，在这里的原因是往往是没有部署到nexus的仓库中。产生原因有如下两种：<sunfy-line></p>\n<p>　　1、部署仓库错误：</p>\n<p>　　前面的博文有讲过 Nexus 私服有三种仓库类型：Hosted、Proxy和Virtual，另外还有一个 group （仓库组）用于对多个仓库进行组合。部署的时候只能部署到 Hosted 类型的宿主仓库中，如果是其他类型就会出现这个 400 错误。若是出现这个错误，只需修改 POM 文件中的部署仓库到对应的宿主仓库即可解决此问题。</p>\n<p>　　2、宿主仓库不允许重复部署：<br>　　默认情况下重复部署构件到 Releases 仓库中也会出现 400 错误，原因是 Nexus 私服中 Releases 仓库默认的 Deployment Policy 是 “Disable Redeploy”，所以当你重复部署构件至 Releases 宿主仓库时就会出现这个 400 错误。出现这个问题，只需要将宿主仓库的 Deployment Policy 改为 “” 即可解决，解决方法如下所示：</p>\n<p><img src=\"../../../../img/Centos-Docker-nexus-error/image-20210227183839572.png\" alt=\"image-20210227183839572\"></p>\n<h3 id=\"二、未认证或认证不通过。\"><a href=\"#二、未认证或认证不通过。\" class=\"headerlink\" title=\"二、未认证或认证不通过。\"></a><strong>二、未认证或认证不通过。</strong></h3><p><strong>Return code is: 401, ReasonPhrase: Unauthorized.</strong></p>\n<p><img src=\"../../../../img/Centos-Docker-nexus-error/image-20210227183901906.png\" alt=\"image-20210227183901906\"></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] BUILD FAILURE</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] Total time: 2.215 s</span><br><span class=\"line\">[INFO] Finished at: 2016-02-18T10:50:56+08:00</span><br><span class=\"line\">[INFO] Final Memory: 19M&#x2F;175M</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.8.2:deploy (default-deploy) on project xeger: </span><br><span class=\"line\">        Failed to deploy artifacts: Could not transfer artifact nl.flotsam:xeger:jar:1.0.2 from&#x2F;to nexus-releases </span><br><span class=\"line\">        (http:&#x2F;&#x2F;localhost:8081&#x2F;nexus&#x2F;content&#x2F;repositories&#x2F;releases&#x2F;): Failed to transfer file: </span><br><span class=\"line\">        http:&#x2F;&#x2F;localhost:8081&#x2F;nexus&#x2F;content&#x2F;repositories&#x2F;releases&#x2F;nl&#x2F;flotsam&#x2F;xeger&#x2F;1.0.2&#x2F;xeger-1.0.2.jar. </span><br><span class=\"line\">        Return code is: 401, ReasonPhrase: Unauthorized. -&gt; [Help 1]</span><br><span class=\"line\">[ERROR]</span><br><span class=\"line\">[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.</span><br><span class=\"line\">[ERROR] Re-run Maven using the -X switch to enable full debug logging.</span><br><span class=\"line\">[ERROR]</span><br><span class=\"line\">[ERROR] For more information about the errors and possible solutions, please read the following articles:</span><br><span class=\"line\">[ERROR] [Help 1] http:&#x2F;&#x2F;cwiki.apache.org&#x2F;confluence&#x2F;display&#x2F;MAVEN&#x2F;MojoExecutionException</span><br></pre></td></tr></table></figure>\n<p>　　出现这种错误，原因如下所示：</p>\n<p>　　1、是未配置 Nexus 私服用户信息，或配置的账号、密码错误，均会出现 401 的错误，解决方法就是修改 maven settings.xml 配置文件，添加如下信息即可解决问题。　　</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;</span><br><span class=\"line\">&lt;settings xmlns&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;SETTINGS&#x2F;1.0.0&quot;</span><br><span class=\"line\">        xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;</span><br><span class=\"line\">        xsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;SETTINGS&#x2F;1.0.0 http:&#x2F;&#x2F;maven.apache.org&#x2F;xsd&#x2F;settings-1.0.0.xsd&quot;&gt;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    &lt;servers&gt;</span><br><span class=\"line\">        &lt;!-- Nexus 构件部署用户信息 --&gt;</span><br><span class=\"line\">        &lt;server&gt;</span><br><span class=\"line\">            &lt;id&gt;nexus-releases&lt;&#x2F;id&gt;</span><br><span class=\"line\">            &lt;username&gt;fanfengping&lt;&#x2F;username&gt;</span><br><span class=\"line\">            &lt;password&gt;密码&lt;&#x2F;password&gt;</span><br><span class=\"line\">        &lt;&#x2F;server&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;server&gt;</span><br><span class=\"line\">            &lt;id&gt;nexus-snapshots&lt;&#x2F;id&gt;</span><br><span class=\"line\">            &lt;username&gt;fanfengping&lt;&#x2F;username&gt;</span><br><span class=\"line\">            &lt;password&gt;密码&lt;&#x2F;password&gt;</span><br><span class=\"line\">        &lt;&#x2F;server&gt;</span><br><span class=\"line\">        </span><br><span class=\"line\">    &lt;&#x2F;servers&gt;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&lt;&#x2F;settings&gt;</span><br></pre></td></tr></table></figure>\n<p>　　2、是 maven 项目工程 POM 文件中配置的 Nexus 私服宿主仓库的 project.distributionManagement.[repository|snapshotRepository].id 在 maven settings.xml 中配置的宿主仓库 settings.servers.server.id 不存在，统一二者的 ID 后，即可解决此问题。</p>\n<h3 id=\"三、连接失败。\"><a href=\"#三、连接失败。\" class=\"headerlink\" title=\"三、连接失败。\"></a><strong>三、连接失败。</strong></h3><p><strong>Connection refused: connect. 或 \\</strong>Return code is: 405*<em>*</em></p>\n<p>　　出现这种错误，肯定是 POM 文件中配置的 url 错误，认真检查一下 url 是否正确，然后订正一下，重新部署即可。</p>\n<h3 id=\"四、缺失私服仓库连接配置。\"><a href=\"#四、缺失私服仓库连接配置。\" class=\"headerlink\" title=\"四、缺失私服仓库连接配置。\"></a><strong>四、缺失私服仓库连接配置。</strong></h3><p><strong>Deployment failed: repository element was not specified in the POM inside distributionManagement element or in -DaltDeploymentRepository=id::layout::url parameter</strong></p>\n<p>　　具体提示信息如下所示：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] BUILD FAILURE</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[INFO] Total time: 1.969 s</span><br><span class=\"line\">[INFO] Finished at: 2016-02-18T10:47:22+08:00</span><br><span class=\"line\">[INFO] Final Memory: 18M&#x2F;177M</span><br><span class=\"line\">[INFO] ------------------------------------------------------------------------</span><br><span class=\"line\">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:2.8.2:deploy (default-deploy) on project xeger: </span><br><span class=\"line\">        Deployment failed: repository element was not specified in the POM inside distributionManagement element </span><br><span class=\"line\">        or in -DaltDeploymentRepository&#x3D;id::layout::url parameter -&gt; [Help 1]</span><br><span class=\"line\">[ERROR]</span><br><span class=\"line\">[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.</span><br><span class=\"line\">[ERROR] Re-run Maven using the -X switch to enable full debug logging.</span><br><span class=\"line\">[ERROR]</span><br><span class=\"line\">[ERROR] For more information about the errors and possible solutions, please read the following articles:</span><br><span class=\"line\">[ERROR] [Help 1] http:&#x2F;&#x2F;cwiki.apache.org&#x2F;confluence&#x2F;display&#x2F;MAVEN&#x2F;MojoExecutionException</span><br></pre></td></tr></table></figure>\n<p>　　此问题是因 POM 文件遗漏了 Nexus 私服连接配置导致的，在 POM 文件中添加 distributionManagement 节点或者在命令行执行时添加 -DaltDeploymentRepository=id::layout::url 参数即可解决。POM 文件中添加 distributionManagement 如下所示：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;project&gt;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;developers&gt;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &lt;&#x2F;developers&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;distributionManagement&gt;</span><br><span class=\"line\">        &lt;repository&gt;</span><br><span class=\"line\">            &lt;id&gt;nexus-releases&lt;&#x2F;id&gt;</span><br><span class=\"line\">            &lt;name&gt;Nexus Releases Repository Pro&lt;&#x2F;name&gt;</span><br><span class=\"line\">            &lt;url&gt;http:&#x2F;&#x2F;localhost:8081&#x2F;nexus&#x2F;content&#x2F;repositories&#x2F;releases&#x2F;&lt;&#x2F;url&gt;</span><br><span class=\"line\">        &lt;&#x2F;repository&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;snapshotRepository&gt;</span><br><span class=\"line\">            &lt;id&gt;nexus-snapshots&lt;&#x2F;id&gt;</span><br><span class=\"line\">            &lt;name&gt;Nexus Snapshots Repository Pro&lt;&#x2F;name&gt;</span><br><span class=\"line\">            &lt;url&gt;http:&#x2F;&#x2F;localhost:8081&#x2F;nexus&#x2F;content&#x2F;repositories&#x2F;snapshots&#x2F;&lt;&#x2F;url&gt;</span><br><span class=\"line\">        &lt;&#x2F;snapshotRepository&gt;</span><br><span class=\"line\">    &lt;&#x2F;distributionManagement&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;dependencies&gt;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &lt;&#x2F;dependencies&gt;</span><br><span class=\"line\">    </span><br><span class=\"line\">    &lt;build&gt;</span><br><span class=\"line\">        ...</span><br><span class=\"line\">    &lt;&#x2F;build&gt;</span><br><span class=\"line\">&lt;&#x2F;project&gt;</span><br></pre></td></tr></table></figure>","next":{"title":"解决： Incorrect username or password, or no permission","path":"api/articles/resource-RPC-Docker-Centos-Docker-nexus-error-pwd.json","image":"/img/header_img/docker/docker.jpg","num_read":1347,"num_like":292,"num_collection":55,"num_comments":72},"prev":{"title":"RabbitMQ主要工作模式","path":"api/articles/resource-MQ-rabbitMQ-RabbitMQWokers.json","image":"/img/header_img/MQ/rabbitmq.PNG","num_read":698,"num_like":758,"num_collection":728,"num_comments":175},"categories":[{"name":"RPC远程调用","path":"api/categories/RPC远程调用.json","pathContent":"api/categories/RPC远程调用","description":"RPC（Remote Procedure Call）远程过程调用，简单的理解是一个节点请求另一个节点提供的服务","cover":"https://sunfy9.gitee.io/project/photo/project/rpc.jpg"}],"tags":[{"name":"CentOS","path":"api/tags/CentOS.json","pathContent":"api/tags/CentOS","description":"免费的、开源的、可以重新分发的开源操作系统","cover":"https://sunfy9.gitee.io/img/header_img/windows/centos.png"},{"name":"Docker","path":"api/tags/Docker.json","pathContent":"api/tags/Docker","description":"一个开源的应用容器引擎。","cover":"https://sunfy9.gitee.io/img/header_img/sunfy-default.png"},{"name":"nexus3","path":"api/tags/nexus3.json","pathContent":"api/tags/nexus3","description":"[nexus3]暂未设置说明","cover":"https://sunfy9.gitee.io/img/header_img/sunfy-default.png"}]}