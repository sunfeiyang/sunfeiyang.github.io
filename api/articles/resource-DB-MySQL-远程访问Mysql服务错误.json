{"title":"MySQL 远程访问Mysql服务错误","num_read":1108,"num_like":844,"num_collection":812,"num_comments":209,"slug":"resource-DB-MySQL-远程访问Mysql服务错误","date":"2022-05-12T16:00:00.000Z","img":"/img/header_img/DB/Remoteaccesserror.png","_id":"clhrbp2as0014o5lgd7k14tk9","project":"DB","subtitle":"远程访问Mysql服务错误","site":{"data":{}},"updated":"2022-09-20T01:19:30.433Z","comments":true,"path":"api/articles/resource-DB-MySQL-远程访问Mysql服务错误.json","webPath":"2022/05/13/resource-DB-MySQL-远程访问Mysql服务错误/","permalink":"https://sunfy9.gitee.io/2022/05/13/resource-DB-MySQL-%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AEMysql%E6%9C%8D%E5%8A%A1%E9%94%99%E8%AF%AF/","excerpt":null,"covers":["../../../../img/远程访问Mysql服务错误/801509-20151120104535296-2141533961.png","../../../../img/远程访问Mysql服务错误/801509-20151120104536124-1606298717.png","../../../../img/远程访问Mysql服务错误/801509-20151120104556390-931362079.png","../../../../img/远程访问Mysql服务错误/801509-20151120104614968-1015936491.png","../../../../img/远程访问Mysql服务错误/801509-20151120104615280-1621459372.png","../../../../img/远程访问Mysql服务错误/801509-20151120104615515-1814182708.png","../../../../img/远程访问Mysql服务错误/801509-20151120104615749-1657987100.png"],"keywords":"sunfy, hexo-theme-snail","content":"<h1 id=\"mysql无法远程连接的解决方法\"><a href=\"#mysql无法远程连接的解决方法\" class=\"headerlink\" title=\"mysql无法远程连接的解决方法\"></a><a href=\"https://www.cnblogs.com/star91/p/4980024.html\" target=\"_blank\" rel=\"noopener\">mysql无法远程连接的解决方法</a></h1><p>​    在阿里云服务器上安装好MySQL后，首先想到的就是安装一款工具来管理数据库，一开始选择了<a href=\"http://www.phpmyadmin.net/\" target=\"_blank\" rel=\"noopener\">phpMyAdmin</a>，这个工具安装很简单，只要解压到能访问的目录下就行了。在浏览器中访问phpMyAdmin目录就行了，输入用户名和密码就能进入管理数据库了。</p>\n<p><img src=\"../../../../img/远程访问Mysql服务错误/801509-20151120104535296-2141533961.png\" alt=\"img\"></p>\n<p>但是每次打开浏览器来管理数据库还是不太方便，所以最终选择了<a href=\"http://www.navicat.com.cn/\" target=\"_blank\" rel=\"noopener\">Navicat</a>软件来管理数据库，在新建连接时，输入正确的主机、用户名和密码，连接测试时弹出如下错误。<sunfy-line></p>\n<p><img src=\"../../../../img/远程访问Mysql服务错误/801509-20151120104536124-1606298717.png\" alt=\"img\"></p>\n<p>原因是MySQL默认不支持远程连接,（那么phpMyAdmin为什么可以连接呢？那是因为phpMyadmin的环境是上传到服务器的，其本身访问数据库是相当于本机localhost访问的），如果想远程访问，可以使用下面的方法来解决。</p>\n<p>远程连接mysql数据库时出现如下提示信息：“MYSQL CONNECT ERROR – 1130:Host ’202.43.<strong>.</strong>’ is not allowed to connect to this MySQL server”</p>\n<p>在创建mysql账户时，限制连接账户远程登录。也就是说，除了当前mysql所在的安装服务器外，其他的ip（主机）都是不允许访问的，即使你的用户名和密码是正确的。这时候就要修改用户的访问权限。</p>\n<p>首先是用root用户登录到mysql的安装主机，然后进入mysql：</p>\n<p>mysql -u root -p</p>\n<p>root是mysql的最高授权用户名，这时会提示你输入密码，正确输入密码后回车，进入mysql。回车</p>\n<p>然后输入如下命令：</p>\n<p>grant all on 数据库名.* to ‘数据库账户名’@’%’ identified by ‘密码’ with grant option;</p>\n<p>回车</p>\n<p>flush privileges;</p>\n<p>回车<br>注意：上面的单引号不能省，数据库名.<em> 表示要开放的数据库下所有表，如果该连接的所有数据库都要开放，可以用 </em>.* 代替。<br>‘数据库账户名’@’%’ 这里表示要开放的账户，百分号表示在任何主机都允许访问。<br>如果以上两步均显示 “Query OK, 0 rows affected (0.00 sec)”，那么说明命令已经成功执行，现在就可以远程连接你的mysql数据库了。</p>\n<p>(1).如果想赋予所有操作的权限</p>\n<p>  grant all on … to 用户名……</p>\n<p>(2).如果想赋予操作所有数据库的所有表的权限</p>\n<p>  grant … on <em>.</em> to 用户名……</p>\n<p>(3).如果想赋予某个数据库的所有表</p>\n<p>  grant … on 数据库名称.’<em>‘ to 用户名…… ([ </em> ]两边一定要加单引号)</p>\n<p>(4).如果想赋予某个数据库的某张表</p>\n<p>  grant … on 数据库名称.表名 to 用户名……</p>\n<p>(5).如果想任何客户端都能通过该用户名远程访问</p>\n<p>  grant … on … to 用户名@% ……. (要把IP地址改成[ % ])</p>\n<p>(6).改完了以后一定要重新启动MySQL服务</p>\n<p>用户会存到Mysql服务器上的user表中，所以下面的两种方法都可以解决这个问题：</p>\n<p>1。 改表法。可能是你的帐号不允许从远程登陆，只能在localhost。这个时候只要在localhost的那台电脑，登入mysql后，更改 “mysql” 数据库里的 “user” 表里的 “host” 项，从”localhost”改称”%”</p>\n<p>mysql -u root -p</p>\n<p>mysql&gt;use mysql;</p>\n<p>mysql&gt;update user set host = ’%’ where user = ’root’;mysql&gt;select host, user from user; </p>\n<p>mysql&gt;flush privileges;</p>\n<p>\\2. 授权法。例如，你想myuser使用mypassword从任何主机连接到mysql服务器的话。</p>\n<p>GRANT ALL PRIVILEGES ON <em>.</em> TO ’myuser’@’%’ IDENTIFIED BY ’mypassword’ WITH GRANT OPTION; </p>\n<p>如果你想允许用户myuser从ip为192.168.1.3的主机连接到mysql服务器，并使用mypassword作为密码</p>\n<p>GRANT ALL PRIVILEGES ON <em>.</em> TO ’myuser’@’192.168.1.3’ IDENTIFIED BY ’mypassword’ WITH GRANT OPTION;</p>\n<p>如果还是无法远程我们可参考</p>\n<p>1、Mysql的端口是否正确，通过netstat -ntlp查看端口占用情况，一般情况下端口是3306。在用工具连接MySQl是要用到端口。例如My AdminMy Query BrowserMySQl Front等。</p>\n<p>2、检查用户权限是否正确。<br>   例如：用户Tester,user表里有两条记录：host分别为localhost和%(为了安全，%可以换成你需要外部连接的IP)。</p>\n<p>3、查看/etc/my.cnf中,skip-networking 是否已被注掉,需要注掉。<br> 报错：ERROR 2003 (HY000): Can’t connect to MySQL server on ‘192.168.51.112’ (111)</p>\n<p>4、查看iptables是否停掉,没关的情况下,无法连接。<br>通过：service iptables stop临时关闭。<br>报错：ERROR 2003 (HY000): Can’t connect to MySQL server on ‘192.168.51.112’ (113)</p>\n<p>另外，我们还可以通过配置http通道来使Navicat远程连接到数据库，这样做的好处是不需要前面繁杂的配置。在主机名ＩＰ地址那里填写LocalHost</p>\n<p>用户名与密码一栏则填写你所在的数据库用户名与密码。</p>\n<p>这时候还不能连接数据库的，需要通过Http通道的形式进行数据库连接。</p>\n<p>点击连接属性标签栏中的Http，如下图所示：</p>\n<p><img src=\"../../../../img/远程访问Mysql服务错误/801509-20151120104556390-931362079.png\" alt=\"img\"></p>\n<p>勾选使用Http通道后，在通道地址一栏输入你的网址与后台文件地址。</p>\n<p>例如：<a href=\"http://host/ntunnel_mysql.php\" target=\"_blank\" rel=\"noopener\">http://host/ntunnel_mysql.php</a></p>\n<p><img src=\"../../../../img/远程访问Mysql服务错误/801509-20151120104614968-1015936491.png\" alt=\"img\"></p>\n<p>这里说明一下通道地址，前半部份：<a href=\"http://host/是指你的服务器的域名，后半部份：ntunnel_mysql.php是指NaviCat客户端后台连接地址。这里ntunnel_mysql.php可以根据你自己的喜好去重命名。那么，这个ntunnel_mysql.php文件在哪里找呢？\" target=\"_blank\" rel=\"noopener\">http://host/是指你的服务器的域名，后半部份：ntunnel_mysql.php是指NaviCat客户端后台连接地址。这里ntunnel_mysql.php可以根据你自己的喜好去重命名。那么，这个ntunnel_mysql.php文件在哪里找呢？</a></p>\n<p>这个ntunnel_mysql.php文件在你点击确定保存了连接信息后，会自动生成一个php文件于NaviCat的文件根目录下，，如下图所示：</p>\n<p><img src=\"../../../../img/远程访问Mysql服务错误/801509-20151120104615280-1621459372.png\" alt=\"img\"></p>\n<p>使用Ftp工具将该文件上传到能通道地址目录就行了。</p>\n<p><img src=\"../../../../img/远程访问Mysql服务错误/801509-20151120104615515-1814182708.png\" alt=\"img\"></p>\n<p>现在连接测试就能成功了。</p>\n<p><img src=\"../../../../img/远程访问Mysql服务错误/801509-20151120104615749-1657987100.png\" alt=\"img\"></p>\n","more":"<h1 id=\"mysql无法远程连接的解决方法\"><a href=\"#mysql无法远程连接的解决方法\" class=\"headerlink\" title=\"mysql无法远程连接的解决方法\"></a><a href=\"https://www.cnblogs.com/star91/p/4980024.html\" target=\"_blank\" rel=\"noopener\">mysql无法远程连接的解决方法</a></h1><p>​    在阿里云服务器上安装好MySQL后，首先想到的就是安装一款工具来管理数据库，一开始选择了<a href=\"http://www.phpmyadmin.net/\" target=\"_blank\" rel=\"noopener\">phpMyAdmin</a>，这个工具安装很简单，只要解压到能访问的目录下就行了。在浏览器中访问phpMyAdmin目录就行了，输入用户名和密码就能进入管理数据库了。</p>\n<p><img src=\"../../../../img/远程访问Mysql服务错误/801509-20151120104535296-2141533961.png\" alt=\"img\"></p>\n<p>但是每次打开浏览器来管理数据库还是不太方便，所以最终选择了<a href=\"http://www.navicat.com.cn/\" target=\"_blank\" rel=\"noopener\">Navicat</a>软件来管理数据库，在新建连接时，输入正确的主机、用户名和密码，连接测试时弹出如下错误。<sunfy-line></p>\n<p><img src=\"../../../../img/远程访问Mysql服务错误/801509-20151120104536124-1606298717.png\" alt=\"img\"></p>\n<p>原因是MySQL默认不支持远程连接,（那么phpMyAdmin为什么可以连接呢？那是因为phpMyadmin的环境是上传到服务器的，其本身访问数据库是相当于本机localhost访问的），如果想远程访问，可以使用下面的方法来解决。</p>\n<p>远程连接mysql数据库时出现如下提示信息：“MYSQL CONNECT ERROR – 1130:Host ’202.43.<strong>.</strong>’ is not allowed to connect to this MySQL server”</p>\n<p>在创建mysql账户时，限制连接账户远程登录。也就是说，除了当前mysql所在的安装服务器外，其他的ip（主机）都是不允许访问的，即使你的用户名和密码是正确的。这时候就要修改用户的访问权限。</p>\n<p>首先是用root用户登录到mysql的安装主机，然后进入mysql：</p>\n<p>mysql -u root -p</p>\n<p>root是mysql的最高授权用户名，这时会提示你输入密码，正确输入密码后回车，进入mysql。回车</p>\n<p>然后输入如下命令：</p>\n<p>grant all on 数据库名.* to ‘数据库账户名’@’%’ identified by ‘密码’ with grant option;</p>\n<p>回车</p>\n<p>flush privileges;</p>\n<p>回车<br>注意：上面的单引号不能省，数据库名.<em> 表示要开放的数据库下所有表，如果该连接的所有数据库都要开放，可以用 </em>.* 代替。<br>‘数据库账户名’@’%’ 这里表示要开放的账户，百分号表示在任何主机都允许访问。<br>如果以上两步均显示 “Query OK, 0 rows affected (0.00 sec)”，那么说明命令已经成功执行，现在就可以远程连接你的mysql数据库了。</p>\n<p>(1).如果想赋予所有操作的权限</p>\n<p>  grant all on … to 用户名……</p>\n<p>(2).如果想赋予操作所有数据库的所有表的权限</p>\n<p>  grant … on <em>.</em> to 用户名……</p>\n<p>(3).如果想赋予某个数据库的所有表</p>\n<p>  grant … on 数据库名称.’<em>‘ to 用户名…… ([ </em> ]两边一定要加单引号)</p>\n<p>(4).如果想赋予某个数据库的某张表</p>\n<p>  grant … on 数据库名称.表名 to 用户名……</p>\n<p>(5).如果想任何客户端都能通过该用户名远程访问</p>\n<p>  grant … on … to 用户名@% ……. (要把IP地址改成[ % ])</p>\n<p>(6).改完了以后一定要重新启动MySQL服务</p>\n<p>用户会存到Mysql服务器上的user表中，所以下面的两种方法都可以解决这个问题：</p>\n<p>1。 改表法。可能是你的帐号不允许从远程登陆，只能在localhost。这个时候只要在localhost的那台电脑，登入mysql后，更改 “mysql” 数据库里的 “user” 表里的 “host” 项，从”localhost”改称”%”</p>\n<p>mysql -u root -p</p>\n<p>mysql&gt;use mysql;</p>\n<p>mysql&gt;update user set host = ’%’ where user = ’root’;mysql&gt;select host, user from user; </p>\n<p>mysql&gt;flush privileges;</p>\n<p>\\2. 授权法。例如，你想myuser使用mypassword从任何主机连接到mysql服务器的话。</p>\n<p>GRANT ALL PRIVILEGES ON <em>.</em> TO ’myuser’@’%’ IDENTIFIED BY ’mypassword’ WITH GRANT OPTION; </p>\n<p>如果你想允许用户myuser从ip为192.168.1.3的主机连接到mysql服务器，并使用mypassword作为密码</p>\n<p>GRANT ALL PRIVILEGES ON <em>.</em> TO ’myuser’@’192.168.1.3’ IDENTIFIED BY ’mypassword’ WITH GRANT OPTION;</p>\n<p>如果还是无法远程我们可参考</p>\n<p>1、Mysql的端口是否正确，通过netstat -ntlp查看端口占用情况，一般情况下端口是3306。在用工具连接MySQl是要用到端口。例如My AdminMy Query BrowserMySQl Front等。</p>\n<p>2、检查用户权限是否正确。<br>   例如：用户Tester,user表里有两条记录：host分别为localhost和%(为了安全，%可以换成你需要外部连接的IP)。</p>\n<p>3、查看/etc/my.cnf中,skip-networking 是否已被注掉,需要注掉。<br> 报错：ERROR 2003 (HY000): Can’t connect to MySQL server on ‘192.168.51.112’ (111)</p>\n<p>4、查看iptables是否停掉,没关的情况下,无法连接。<br>通过：service iptables stop临时关闭。<br>报错：ERROR 2003 (HY000): Can’t connect to MySQL server on ‘192.168.51.112’ (113)</p>\n<p>另外，我们还可以通过配置http通道来使Navicat远程连接到数据库，这样做的好处是不需要前面繁杂的配置。在主机名ＩＰ地址那里填写LocalHost</p>\n<p>用户名与密码一栏则填写你所在的数据库用户名与密码。</p>\n<p>这时候还不能连接数据库的，需要通过Http通道的形式进行数据库连接。</p>\n<p>点击连接属性标签栏中的Http，如下图所示：</p>\n<p><img src=\"../../../../img/远程访问Mysql服务错误/801509-20151120104556390-931362079.png\" alt=\"img\"></p>\n<p>勾选使用Http通道后，在通道地址一栏输入你的网址与后台文件地址。</p>\n<p>例如：<a href=\"http://host/ntunnel_mysql.php\" target=\"_blank\" rel=\"noopener\">http://host/ntunnel_mysql.php</a></p>\n<p><img src=\"../../../../img/远程访问Mysql服务错误/801509-20151120104614968-1015936491.png\" alt=\"img\"></p>\n<p>这里说明一下通道地址，前半部份：<a href=\"http://host/是指你的服务器的域名，后半部份：ntunnel_mysql.php是指NaviCat客户端后台连接地址。这里ntunnel_mysql.php可以根据你自己的喜好去重命名。那么，这个ntunnel_mysql.php文件在哪里找呢？\" target=\"_blank\" rel=\"noopener\">http://host/是指你的服务器的域名，后半部份：ntunnel_mysql.php是指NaviCat客户端后台连接地址。这里ntunnel_mysql.php可以根据你自己的喜好去重命名。那么，这个ntunnel_mysql.php文件在哪里找呢？</a></p>\n<p>这个ntunnel_mysql.php文件在你点击确定保存了连接信息后，会自动生成一个php文件于NaviCat的文件根目录下，，如下图所示：</p>\n<p><img src=\"../../../../img/远程访问Mysql服务错误/801509-20151120104615280-1621459372.png\" alt=\"img\"></p>\n<p>使用Ftp工具将该文件上传到能通道地址目录就行了。</p>\n<p><img src=\"../../../../img/远程访问Mysql服务错误/801509-20151120104615515-1814182708.png\" alt=\"img\"></p>\n<p>现在连接测试就能成功了。</p>\n<p><img src=\"../../../../img/远程访问Mysql服务错误/801509-20151120104615749-1657987100.png\" alt=\"img\"></p>\n","next":{"title":"Redis消息队列","path":"api/articles/resource-java-redis-redisMQ.json","image":"/img/header_img/java/redisMQ.png","num_read":1618,"num_like":602,"num_collection":532,"num_comments":122},"prev":{"title":"SQL四种连接","path":"api/articles/resource-DB-MySQL-SQL四种连接.json","image":"/img/header_img/DB/connections.png","num_read":632,"num_like":1068,"num_collection":558,"num_comments":134},"categories":[{"name":"数据库","path":"api/categories/数据库.json","pathContent":"api/categories/数据库","description":"结构化存储格式+事务和并发控制+内存管理+SQL访问接口","cover":"https://sunfy9.gitee.io/project/photo/project/db.jpg"}],"tags":[{"name":"MySQL","path":"api/tags/MySQL.json","pathContent":"api/tags/MySQL","description":"一种关系型数据库管理系统","cover":"https://sunfy9.gitee.io/project/photo/project/desk.jpg"}]}