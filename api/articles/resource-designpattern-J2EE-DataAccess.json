{"title":"java设计模式之数据访问对象模式","num_read":492,"num_like":668,"num_collection":633,"num_comments":146,"slug":"resource-designpattern-J2EE-DataAccess","date":"2020-10-11T16:00:00.000Z","img":"/img/header_img/Design/DataAccess.png","_id":"clhrbp2b6004ho5lg9vbue9zc","project":"designPattern","site":{"data":{}},"updated":"2022-09-20T01:34:51.248Z","author":"Sunfy","comments":true,"path":"api/articles/resource-designpattern-J2EE-DataAccess.json","webPath":"2020/10/12/resource-designpattern-J2EE-DataAccess/","permalink":"https://sunfy9.gitee.io/2020/10/12/resource-designpattern-J2EE-DataAccess/","excerpt":null,"covers":["../../../../img/DataAccess/dao_pattern_uml_diagram.jpg"],"keywords":"sunfy, hexo-theme-snail","content":"<p>数据访问对象模式（Data Access Object Pattern）或 DAO 模式用于把低级的数据访问 API 或操作从高级的业务服务中分离出来。以下是数据访问对象模式的参与者。</p>\n<ul>\n<li><strong>数据访问对象接口（Data Access Object Interface）</strong> - 该接口定义了在一个模型对象上要执行的标准操作。</li>\n<li><strong>数据访问对象实体类（Data Access Object concrete class）</strong> - 该类实现了上述的接口。该类负责从数据源获取数据，数据源可以是数据库，也可以是 xml，或者是其他的存储机制。</li>\n<li><strong>模型对象/数值对象（Model Object/Value Object）</strong> - 该对象是简单的 POJO，包含了 get/set 方法来存储通过使用 DAO 类检索到的数据。</li>\n</ul>\n<h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现<sunfy-line></h2><p>我们将创建一个作为模型对象或数值对象的 <em>Student</em> 对象。<em>StudentDao</em> 是数据访问对象接口。<em>StudentDaoImpl</em> 是实现了数据访问对象接口的实体类。<em>DaoPatternDemo</em>，我们的演示类使用 <em>StudentDao</em> 来演示数据访问对象模式的用法。</p>\n<p><img src=\"../../../../img/DataAccess/dao_pattern_uml_diagram.jpg\" alt=\"数据访问对象模式的 UML 图\"></p>\n<h3 id=\"步骤-1\"><a href=\"#步骤-1\" class=\"headerlink\" title=\"步骤 1\"></a>步骤 1</h3><p>创建数值对象。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> rollNo;</span><br><span class=\"line\"> </span><br><span class=\"line\">   Student(String name, <span class=\"keyword\">int</span> rollNo)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.rollNo = rollNo;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setName</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getRollNo</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> rollNo;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setRollNo</span><span class=\"params\">(<span class=\"keyword\">int</span> rollNo)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.rollNo = rollNo;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"步骤-2\"><a href=\"#步骤-2\" class=\"headerlink\" title=\"步骤 2\"></a>步骤 2</h3><p>创建数据访问对象接口。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">StudentDao</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> List&lt;Student&gt; <span class=\"title\">getAllStudents</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> Student <span class=\"title\">getStudent</span><span class=\"params\">(<span class=\"keyword\">int</span> rollNo)</span></span>;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">updateStudent</span><span class=\"params\">(Student student)</span></span>;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deleteStudent</span><span class=\"params\">(Student student)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"步骤-3\"><a href=\"#步骤-3\" class=\"headerlink\" title=\"步骤 3\"></a>步骤 3</h3><p>创建实现了上述接口的实体类。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StudentDaoImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">StudentDao</span> </span>&#123;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">//列表是当作一个数据库</span></span><br><span class=\"line\">   List&lt;Student&gt; students;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">StudentDaoImpl</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">      students = <span class=\"keyword\">new</span> ArrayList&lt;Student&gt;();</span><br><span class=\"line\">      Student student1 = <span class=\"keyword\">new</span> Student(<span class=\"string\">\"Robert\"</span>,<span class=\"number\">0</span>);</span><br><span class=\"line\">      Student student2 = <span class=\"keyword\">new</span> Student(<span class=\"string\">\"John\"</span>,<span class=\"number\">1</span>);</span><br><span class=\"line\">      students.add(student1);</span><br><span class=\"line\">      students.add(student2);    </span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"meta\">@Override</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deleteStudent</span><span class=\"params\">(Student student)</span> </span>&#123;</span><br><span class=\"line\">      students.remove(student.getRollNo());</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"Student: Roll No \"</span> + student.getRollNo() </span><br><span class=\"line\">         +<span class=\"string\">\", deleted from database\"</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"comment\">//从数据库中检索学生名单</span></span><br><span class=\"line\">   <span class=\"meta\">@Override</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> List&lt;Student&gt; <span class=\"title\">getAllStudents</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> students;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"meta\">@Override</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> Student <span class=\"title\">getStudent</span><span class=\"params\">(<span class=\"keyword\">int</span> rollNo)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> students.get(rollNo);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"meta\">@Override</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">updateStudent</span><span class=\"params\">(Student student)</span> </span>&#123;</span><br><span class=\"line\">      students.get(student.getRollNo()).setName(student.getName());</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"Student: Roll No \"</span> + student.getRollNo() </span><br><span class=\"line\">         +<span class=\"string\">\", updated in the database\"</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"步骤-4\"><a href=\"#步骤-4\" class=\"headerlink\" title=\"步骤 4\"></a>步骤 4</h3><p>使用 <em>StudentDao</em> 来演示数据访问对象模式的用法。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DaoPatternDemo</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">      StudentDao studentDao = <span class=\"keyword\">new</span> StudentDaoImpl();</span><br><span class=\"line\"> </span><br><span class=\"line\">      <span class=\"comment\">//输出所有的学生</span></span><br><span class=\"line\">      <span class=\"keyword\">for</span> (Student student : studentDao.getAllStudents()) &#123;</span><br><span class=\"line\">         System.out.println(<span class=\"string\">\"Student: [RollNo : \"</span></span><br><span class=\"line\">            +student.getRollNo()+<span class=\"string\">\", Name : \"</span>+student.getName()+<span class=\"string\">\" ]\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">      <span class=\"comment\">//更新学生</span></span><br><span class=\"line\">      Student student =studentDao.getAllStudents().get(<span class=\"number\">0</span>);</span><br><span class=\"line\">      student.setName(<span class=\"string\">\"Michael\"</span>);</span><br><span class=\"line\">      studentDao.updateStudent(student);</span><br><span class=\"line\"> </span><br><span class=\"line\">      <span class=\"comment\">//获取学生</span></span><br><span class=\"line\">      studentDao.getStudent(<span class=\"number\">0</span>);</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"Student: [RollNo : \"</span></span><br><span class=\"line\">         +student.getRollNo()+<span class=\"string\">\", Name : \"</span>+student.getName()+<span class=\"string\">\" ]\"</span>);      </span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"步骤-5\"><a href=\"#步骤-5\" class=\"headerlink\" title=\"步骤 5\"></a>步骤 5</h3><p>执行程序，输出结果：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Student: [RollNo : 0, Name : Robert ]</span><br><span class=\"line\">Student: [RollNo : 1, Name : John ]</span><br><span class=\"line\">Student: Roll No 0, updated in the database</span><br><span class=\"line\">Student: [RollNo : 0, Name : Michael ]</span><br></pre></td></tr></table></figure>\n","more":"<p>数据访问对象模式（Data Access Object Pattern）或 DAO 模式用于把低级的数据访问 API 或操作从高级的业务服务中分离出来。以下是数据访问对象模式的参与者。</p>\n<ul>\n<li><strong>数据访问对象接口（Data Access Object Interface）</strong> - 该接口定义了在一个模型对象上要执行的标准操作。</li>\n<li><strong>数据访问对象实体类（Data Access Object concrete class）</strong> - 该类实现了上述的接口。该类负责从数据源获取数据，数据源可以是数据库，也可以是 xml，或者是其他的存储机制。</li>\n<li><strong>模型对象/数值对象（Model Object/Value Object）</strong> - 该对象是简单的 POJO，包含了 get/set 方法来存储通过使用 DAO 类检索到的数据。</li>\n</ul>\n<h2 id=\"实现\"><a href=\"#实现\" class=\"headerlink\" title=\"实现\"></a>实现<sunfy-line></h2><p>我们将创建一个作为模型对象或数值对象的 <em>Student</em> 对象。<em>StudentDao</em> 是数据访问对象接口。<em>StudentDaoImpl</em> 是实现了数据访问对象接口的实体类。<em>DaoPatternDemo</em>，我们的演示类使用 <em>StudentDao</em> 来演示数据访问对象模式的用法。</p>\n<p><img src=\"../../../../img/DataAccess/dao_pattern_uml_diagram.jpg\" alt=\"数据访问对象模式的 UML 图\"></p>\n<h3 id=\"步骤-1\"><a href=\"#步骤-1\" class=\"headerlink\" title=\"步骤 1\"></a>步骤 1</h3><p>创建数值对象。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Student</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> String name;</span><br><span class=\"line\">   <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> rollNo;</span><br><span class=\"line\"> </span><br><span class=\"line\">   Student(String name, <span class=\"keyword\">int</span> rollNo)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.rollNo = rollNo;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setName</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.name = name;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getRollNo</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> rollNo;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setRollNo</span><span class=\"params\">(<span class=\"keyword\">int</span> rollNo)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.rollNo = rollNo;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"步骤-2\"><a href=\"#步骤-2\" class=\"headerlink\" title=\"步骤 2\"></a>步骤 2</h3><p>创建数据访问对象接口。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">StudentDao</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> List&lt;Student&gt; <span class=\"title\">getAllStudents</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> Student <span class=\"title\">getStudent</span><span class=\"params\">(<span class=\"keyword\">int</span> rollNo)</span></span>;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">updateStudent</span><span class=\"params\">(Student student)</span></span>;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deleteStudent</span><span class=\"params\">(Student student)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"步骤-3\"><a href=\"#步骤-3\" class=\"headerlink\" title=\"步骤 3\"></a>步骤 3</h3><p>创建实现了上述接口的实体类。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"> </span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StudentDaoImpl</span> <span class=\"keyword\">implements</span> <span class=\"title\">StudentDao</span> </span>&#123;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"comment\">//列表是当作一个数据库</span></span><br><span class=\"line\">   List&lt;Student&gt; students;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">StudentDaoImpl</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">      students = <span class=\"keyword\">new</span> ArrayList&lt;Student&gt;();</span><br><span class=\"line\">      Student student1 = <span class=\"keyword\">new</span> Student(<span class=\"string\">\"Robert\"</span>,<span class=\"number\">0</span>);</span><br><span class=\"line\">      Student student2 = <span class=\"keyword\">new</span> Student(<span class=\"string\">\"John\"</span>,<span class=\"number\">1</span>);</span><br><span class=\"line\">      students.add(student1);</span><br><span class=\"line\">      students.add(student2);    </span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"meta\">@Override</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">deleteStudent</span><span class=\"params\">(Student student)</span> </span>&#123;</span><br><span class=\"line\">      students.remove(student.getRollNo());</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"Student: Roll No \"</span> + student.getRollNo() </span><br><span class=\"line\">         +<span class=\"string\">\", deleted from database\"</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"comment\">//从数据库中检索学生名单</span></span><br><span class=\"line\">   <span class=\"meta\">@Override</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> List&lt;Student&gt; <span class=\"title\">getAllStudents</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> students;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"meta\">@Override</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> Student <span class=\"title\">getStudent</span><span class=\"params\">(<span class=\"keyword\">int</span> rollNo)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> students.get(rollNo);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"meta\">@Override</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">updateStudent</span><span class=\"params\">(Student student)</span> </span>&#123;</span><br><span class=\"line\">      students.get(student.getRollNo()).setName(student.getName());</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"Student: Roll No \"</span> + student.getRollNo() </span><br><span class=\"line\">         +<span class=\"string\">\", updated in the database\"</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"步骤-4\"><a href=\"#步骤-4\" class=\"headerlink\" title=\"步骤 4\"></a>步骤 4</h3><p>使用 <em>StudentDao</em> 来演示数据访问对象模式的用法。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DaoPatternDemo</span> </span>&#123;</span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">      StudentDao studentDao = <span class=\"keyword\">new</span> StudentDaoImpl();</span><br><span class=\"line\"> </span><br><span class=\"line\">      <span class=\"comment\">//输出所有的学生</span></span><br><span class=\"line\">      <span class=\"keyword\">for</span> (Student student : studentDao.getAllStudents()) &#123;</span><br><span class=\"line\">         System.out.println(<span class=\"string\">\"Student: [RollNo : \"</span></span><br><span class=\"line\">            +student.getRollNo()+<span class=\"string\">\", Name : \"</span>+student.getName()+<span class=\"string\">\" ]\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">      <span class=\"comment\">//更新学生</span></span><br><span class=\"line\">      Student student =studentDao.getAllStudents().get(<span class=\"number\">0</span>);</span><br><span class=\"line\">      student.setName(<span class=\"string\">\"Michael\"</span>);</span><br><span class=\"line\">      studentDao.updateStudent(student);</span><br><span class=\"line\"> </span><br><span class=\"line\">      <span class=\"comment\">//获取学生</span></span><br><span class=\"line\">      studentDao.getStudent(<span class=\"number\">0</span>);</span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"Student: [RollNo : \"</span></span><br><span class=\"line\">         +student.getRollNo()+<span class=\"string\">\", Name : \"</span>+student.getName()+<span class=\"string\">\" ]\"</span>);      </span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"步骤-5\"><a href=\"#步骤-5\" class=\"headerlink\" title=\"步骤 5\"></a>步骤 5</h3><p>执行程序，输出结果：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Student: [RollNo : 0, Name : Robert ]</span><br><span class=\"line\">Student: [RollNo : 1, Name : John ]</span><br><span class=\"line\">Student: Roll No 0, updated in the database</span><br><span class=\"line\">Student: [RollNo : 0, Name : Michael ]</span><br></pre></td></tr></table></figure>\n","next":{"title":"java设计模式之服务定位器模式","path":"api/articles/resource-designpattern-J2EE-Service.json","image":"/img/header_img/Design/Service.png","num_read":255,"num_like":833,"num_collection":714,"num_comments":97},"prev":{"title":"java设计模式之前端控制器模式","path":"api/articles/resource-designpattern-J2EE-Front.json","image":"/img/header_img/Design/Front.png","num_read":715,"num_like":86,"num_collection":476,"num_comments":28},"categories":[{"name":"设计模式","path":"api/categories/设计模式.json","pathContent":"api/categories/设计模式","description":"简单快捷、解决方案","cover":"https://sunfy9.gitee.io/project/photo/project/design.jpg"}],"tags":[]}