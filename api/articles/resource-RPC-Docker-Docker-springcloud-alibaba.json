{"title":"docker下springCloud-alibaba组件安装配置使用","num_read":853,"num_like":930,"num_collection":348,"num_comments":205,"slug":"resource-RPC-Docker-Docker-springcloud-alibaba","date":"2021-04-01T16:00:00.000Z","img":"/img/header_img/docker/docker.jpg","_id":"clhrbp2fp00f6o5lgfh5r7cjj","project":"RPC","site":{"data":{}},"updated":"2022-01-12T06:06:48.000Z","author":"Sunfy","comments":true,"path":"api/articles/resource-RPC-Docker-Docker-springcloud-alibaba.json","webPath":"2021/04/02/resource-RPC-Docker-Docker-springcloud-alibaba/","permalink":"https://sunfy9.gitee.io/2021/04/02/resource-RPC-Docker-Docker-springcloud-alibaba/","excerpt":"springCloud-alibaba相关的常用组件的安装使用，包括nacos","covers":null,"keywords":"sunfy, hexo-theme-snail","content":"<p>springCloud-alibaba相关的常用组件的安装使用，包括nacos<a id=\"more\"></a></p>\n<h2 id=\"Nacos安装及配置\"><a href=\"#Nacos安装及配置\" class=\"headerlink\" title=\"Nacos安装及配置\"></a>Nacos安装及配置</h2><h3 id=\"拉取nacos镜像\"><a href=\"#拉取nacos镜像\" class=\"headerlink\" title=\"拉取nacos镜像\"></a>拉取nacos镜像</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull nacos/nacos-server</span><br></pre></td></tr></table></figure>\n<h3 id=\"启动nacos命令\"><a href=\"#启动nacos命令\" class=\"headerlink\" title=\"启动nacos命令\"></a>启动nacos命令</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d --name nacos -p 8848:8848 -e PREFER_HOST_MODE=hostname -e MODE=standalone nacos/nacos-server</span><br></pre></td></tr></table></figure>\n<p>至此，我们已经可以使用nacos服务，UI地址:<a href=\"http://:8848/nacos\">http://:8848/nacos</a> 账号:nacos 密码:nacos</p>\n<p>上述方式是最简便的方式启动，但这样的话有一点小瑕疵，nacos所有元数据都会保存在容器内部。倘若容器迁移则nacos源数据则不复存在，所以通常我们通常会将nacos元数据保存在mysql中。下面附上配置方式：</p>\n<h3 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件<sunfy-line></h3><p>查看docker容器，nacos启动成功</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps </span><br><span class=\"line\">CONTAINER ID        IMAGE                COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class=\"line\">8149bca96437        nacos/nacos-server   \"bin/docker-startup.…\"   4 minutes ago       Up About a minute   0.0.0.0:8848-&gt;8848/tcp   nacos</span><br></pre></td></tr></table></figure>\n<h4 id=\"进入容器\"><a href=\"#进入容器\" class=\"headerlink\" title=\"进入容器\"></a>进入容器</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker exec -it 8149bca96437 /bin/bash</span><br></pre></td></tr></table></figure>\n<p>修改 conf/application.properties 内容如下：<br>vi conf/application.properties</p>\n<h4 id=\"数据库脚本\"><a href=\"#数据库脚本\" class=\"headerlink\" title=\"数据库脚本\"></a>数据库脚本</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> * Copyright 1999-2018 Alibaba Group Holding Ltd.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Licensed under the Apache License, Version 2.0 (the \"License\");</span></span><br><span class=\"line\"><span class=\"comment\"> * you may not use this file except in compliance with the License.</span></span><br><span class=\"line\"><span class=\"comment\"> * You may obtain a copy of the License at</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *      http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Unless required by applicable law or agreed to in writing, software</span></span><br><span class=\"line\"><span class=\"comment\"> * distributed under the License is distributed on an \"AS IS\" BASIS,</span></span><br><span class=\"line\"><span class=\"comment\"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class=\"line\"><span class=\"comment\"> * See the License for the specific language governing permissions and</span></span><br><span class=\"line\"><span class=\"comment\"> * limitations under the License.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = config_info   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`config_info`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`data_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'data_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`group_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`content`</span> longtext <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'content'</span>,</span><br><span class=\"line\">  <span class=\"string\">`md5`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">32</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'md5'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_create`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'创建时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'修改时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_user`</span> <span class=\"built_in\">text</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'source user'</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_ip`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'source ip'</span>,</span><br><span class=\"line\">  <span class=\"string\">`app_name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'租户字段'</span>,</span><br><span class=\"line\">  <span class=\"string\">`c_desc`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">256</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`c_use`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">64</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`effect`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">64</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`type`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">64</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`c_schema`</span> <span class=\"built_in\">text</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_configinfo_datagrouptenant`</span> (<span class=\"string\">`data_id`</span>,<span class=\"string\">`group_id`</span>,<span class=\"string\">`tenant_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'config_info'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = config_info_aggr   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`config_info_aggr`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`data_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'data_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`group_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'group_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`datum_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'datum_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`content`</span> longtext <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'内容'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'修改时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`app_name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'租户字段'</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_configinfoaggr_datagrouptenantdatum`</span> (<span class=\"string\">`data_id`</span>,<span class=\"string\">`group_id`</span>,<span class=\"string\">`tenant_id`</span>,<span class=\"string\">`datum_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'增加租户字段'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = config_info_beta   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`config_info_beta`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`data_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'data_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`group_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'group_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`app_name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'app_name'</span>,</span><br><span class=\"line\">  <span class=\"string\">`content`</span> longtext <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'content'</span>,</span><br><span class=\"line\">  <span class=\"string\">`beta_ips`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">1024</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'betaIps'</span>,</span><br><span class=\"line\">  <span class=\"string\">`md5`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">32</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'md5'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_create`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'创建时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'修改时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_user`</span> <span class=\"built_in\">text</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'source user'</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_ip`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'source ip'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'租户字段'</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_configinfobeta_datagrouptenant`</span> (<span class=\"string\">`data_id`</span>,<span class=\"string\">`group_id`</span>,<span class=\"string\">`tenant_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'config_info_beta'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = config_info_tag   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`config_info_tag`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`data_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'data_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`group_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'group_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tenant_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tag_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tag_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`app_name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'app_name'</span>,</span><br><span class=\"line\">  <span class=\"string\">`content`</span> longtext <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'content'</span>,</span><br><span class=\"line\">  <span class=\"string\">`md5`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">32</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'md5'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_create`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'创建时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'修改时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_user`</span> <span class=\"built_in\">text</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'source user'</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_ip`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'source ip'</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_configinfotag_datagrouptenanttag`</span> (<span class=\"string\">`data_id`</span>,<span class=\"string\">`group_id`</span>,<span class=\"string\">`tenant_id`</span>,<span class=\"string\">`tag_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'config_info_tag'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = config_tags_relation   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`config_tags_relation`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tag_name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tag_name'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tag_type`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">64</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tag_type'</span>,</span><br><span class=\"line\">  <span class=\"string\">`data_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'data_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`group_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'group_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tenant_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`nid`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`nid`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_configtagrelation_configidtag`</span> (<span class=\"string\">`id`</span>,<span class=\"string\">`tag_name`</span>,<span class=\"string\">`tag_type`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">KEY</span> <span class=\"string\">`idx_tenant_id`</span> (<span class=\"string\">`tenant_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'config_tag_relation'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = group_capacity   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`group_capacity`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">'主键ID'</span>,</span><br><span class=\"line\">  <span class=\"string\">`group_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'Group ID，空字符表示整个集群'</span>,</span><br><span class=\"line\">  <span class=\"string\">`quota`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'配额，0表示使用默认值'</span>,</span><br><span class=\"line\">  <span class=\"string\">`usage`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'使用量'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_size`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'单个配置大小上限，单位为字节，0表示使用默认值'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_aggr_count`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'聚合子配置最大个数，，0表示使用默认值'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_aggr_size`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_history_count`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'最大变更历史数量'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_create`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'创建时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'修改时间'</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_group_id`</span> (<span class=\"string\">`group_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'集群、各Group容量信息表'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = his_config_info   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`his_config_info`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">64</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`nid`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">  <span class=\"string\">`data_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`group_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`app_name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'app_name'</span>,</span><br><span class=\"line\">  <span class=\"string\">`content`</span> longtext <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`md5`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">32</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_create`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_user`</span> <span class=\"built_in\">text</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_ip`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`op_type`</span> <span class=\"built_in\">char</span>(<span class=\"number\">10</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'租户字段'</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`nid`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">KEY</span> <span class=\"string\">`idx_gmt_create`</span> (<span class=\"string\">`gmt_create`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">KEY</span> <span class=\"string\">`idx_gmt_modified`</span> (<span class=\"string\">`gmt_modified`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">KEY</span> <span class=\"string\">`idx_did`</span> (<span class=\"string\">`data_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'多租户改造'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = tenant_capacity   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`tenant_capacity`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">'主键ID'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'Tenant ID'</span>,</span><br><span class=\"line\">  <span class=\"string\">`quota`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'配额，0表示使用默认值'</span>,</span><br><span class=\"line\">  <span class=\"string\">`usage`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'使用量'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_size`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'单个配置大小上限，单位为字节，0表示使用默认值'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_aggr_count`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'聚合子配置最大个数'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_aggr_size`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_history_count`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'最大变更历史数量'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_create`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'创建时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'修改时间'</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_tenant_id`</span> (<span class=\"string\">`tenant_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'租户容量信息表'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`tenant_info`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`kp`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'kp'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">default</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tenant_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">default</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tenant_name'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_desc`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">256</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tenant_desc'</span>,</span><br><span class=\"line\">  <span class=\"string\">`create_source`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">32</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'create_source'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_create`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'创建时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'修改时间'</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_tenant_info_kptenantid`</span> (<span class=\"string\">`kp`</span>,<span class=\"string\">`tenant_id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">KEY</span> <span class=\"string\">`idx_tenant_id`</span> (<span class=\"string\">`tenant_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'tenant_info'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">users</span> (</span><br><span class=\"line\">\tusername <span class=\"built_in\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> PRIMARY <span class=\"keyword\">KEY</span>,</span><br><span class=\"line\">\t<span class=\"keyword\">password</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">500</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">\tenabled <span class=\"built_in\">boolean</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">roles</span> (</span><br><span class=\"line\">\tusername <span class=\"built_in\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">\t<span class=\"keyword\">role</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">\t<span class=\"keyword\">constraint</span> uk_username_role <span class=\"keyword\">UNIQUE</span> (username,<span class=\"keyword\">role</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> permissions (</span><br><span class=\"line\">    <span class=\"keyword\">role</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">    <span class=\"keyword\">resource</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">512</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">    <span class=\"keyword\">action</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">8</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">    <span class=\"keyword\">constraint</span> uk_role_permission <span class=\"keyword\">UNIQUE</span> (<span class=\"keyword\">role</span>,<span class=\"keyword\">resource</span>,<span class=\"keyword\">action</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"keyword\">users</span> (username, <span class=\"keyword\">password</span>, enabled) <span class=\"keyword\">VALUES</span> (<span class=\"string\">'nacos'</span>, <span class=\"string\">'$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu'</span>, <span class=\"literal\">TRUE</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"keyword\">roles</span> (username, <span class=\"keyword\">role</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">'nacos'</span>, <span class=\"string\">'ROLE_ADMIN'</span>);</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h4><p>application.properties 内容替换为<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">spring</span></span><br><span class=\"line\"></span><br><span class=\"line\">server.contextPath=/nacos</span><br><span class=\"line\">server.servlet.contextPath=/nacos</span><br><span class=\"line\">server.port=8848</span><br><span class=\"line\">management.metrics.export.elastic.enabled=false</span><br><span class=\"line\">management.metrics.export.influx.enabled=false</span><br><span class=\"line\">server.tomcat.accesslog.enabled=true</span><br><span class=\"line\">server.tomcat.accesslog.pattern=%h %l %u %t \"%r\" %s %b %D %&#123;User-Agent&#125;i</span><br><span class=\"line\">server.tomcat.basedir=</span><br><span class=\"line\">nacos.security.ignore.urls=/,/**/*.css,/**/*.js,/**/*.html,/**/*.map,/**/*.svg,/**/*.png,/**/*.ico,/console-fe/public/**,/v1/auth/login,/v1/console/health/**,/v1/cs/**,/v1/ns/**,/v1/cmdb/**,/actuator/**,/v1/console/server/**</span><br><span class=\"line\">spring.datasource.platform=mysql</span><br><span class=\"line\">db.num=1</span><br><span class=\"line\">db.url.0=jdbc:mysql://&lt;ip&gt;:&lt;port&gt;/nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true</span><br><span class=\"line\">db.user=root</span><br><span class=\"line\">db.password=password</span><br></pre></td></tr></table></figure></p>\n","more":"</p>\n<h2 id=\"Nacos安装及配置\"><a href=\"#Nacos安装及配置\" class=\"headerlink\" title=\"Nacos安装及配置\"></a>Nacos安装及配置</h2><h3 id=\"拉取nacos镜像\"><a href=\"#拉取nacos镜像\" class=\"headerlink\" title=\"拉取nacos镜像\"></a>拉取nacos镜像</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull nacos/nacos-server</span><br></pre></td></tr></table></figure>\n<h3 id=\"启动nacos命令\"><a href=\"#启动nacos命令\" class=\"headerlink\" title=\"启动nacos命令\"></a>启动nacos命令</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d --name nacos -p 8848:8848 -e PREFER_HOST_MODE=hostname -e MODE=standalone nacos/nacos-server</span><br></pre></td></tr></table></figure>\n<p>至此，我们已经可以使用nacos服务，UI地址:<a href=\"http://:8848/nacos\">http://:8848/nacos</a> 账号:nacos 密码:nacos</p>\n<p>上述方式是最简便的方式启动，但这样的话有一点小瑕疵，nacos所有元数据都会保存在容器内部。倘若容器迁移则nacos源数据则不复存在，所以通常我们通常会将nacos元数据保存在mysql中。下面附上配置方式：</p>\n<h3 id=\"修改配置文件\"><a href=\"#修改配置文件\" class=\"headerlink\" title=\"修改配置文件\"></a>修改配置文件<sunfy-line></h3><p>查看docker容器，nacos启动成功</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps </span><br><span class=\"line\">CONTAINER ID        IMAGE                COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class=\"line\">8149bca96437        nacos/nacos-server   \"bin/docker-startup.…\"   4 minutes ago       Up About a minute   0.0.0.0:8848-&gt;8848/tcp   nacos</span><br></pre></td></tr></table></figure>\n<h4 id=\"进入容器\"><a href=\"#进入容器\" class=\"headerlink\" title=\"进入容器\"></a>进入容器</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker exec -it 8149bca96437 /bin/bash</span><br></pre></td></tr></table></figure>\n<p>修改 conf/application.properties 内容如下：<br>vi conf/application.properties</p>\n<h4 id=\"数据库脚本\"><a href=\"#数据库脚本\" class=\"headerlink\" title=\"数据库脚本\"></a>数据库脚本</h4><figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> * Copyright 1999-2018 Alibaba Group Holding Ltd.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Licensed under the Apache License, Version 2.0 (the \"License\");</span></span><br><span class=\"line\"><span class=\"comment\"> * you may not use this file except in compliance with the License.</span></span><br><span class=\"line\"><span class=\"comment\"> * You may obtain a copy of the License at</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *      http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * Unless required by applicable law or agreed to in writing, software</span></span><br><span class=\"line\"><span class=\"comment\"> * distributed under the License is distributed on an \"AS IS\" BASIS,</span></span><br><span class=\"line\"><span class=\"comment\"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class=\"line\"><span class=\"comment\"> * See the License for the specific language governing permissions and</span></span><br><span class=\"line\"><span class=\"comment\"> * limitations under the License.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = config_info   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`config_info`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`data_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'data_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`group_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`content`</span> longtext <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'content'</span>,</span><br><span class=\"line\">  <span class=\"string\">`md5`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">32</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'md5'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_create`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'创建时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'修改时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_user`</span> <span class=\"built_in\">text</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'source user'</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_ip`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'source ip'</span>,</span><br><span class=\"line\">  <span class=\"string\">`app_name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'租户字段'</span>,</span><br><span class=\"line\">  <span class=\"string\">`c_desc`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">256</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`c_use`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">64</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`effect`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">64</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`type`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">64</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`c_schema`</span> <span class=\"built_in\">text</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_configinfo_datagrouptenant`</span> (<span class=\"string\">`data_id`</span>,<span class=\"string\">`group_id`</span>,<span class=\"string\">`tenant_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'config_info'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = config_info_aggr   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`config_info_aggr`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`data_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'data_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`group_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'group_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`datum_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'datum_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`content`</span> longtext <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'内容'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'修改时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`app_name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'租户字段'</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_configinfoaggr_datagrouptenantdatum`</span> (<span class=\"string\">`data_id`</span>,<span class=\"string\">`group_id`</span>,<span class=\"string\">`tenant_id`</span>,<span class=\"string\">`datum_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'增加租户字段'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = config_info_beta   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`config_info_beta`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`data_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'data_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`group_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'group_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`app_name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'app_name'</span>,</span><br><span class=\"line\">  <span class=\"string\">`content`</span> longtext <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'content'</span>,</span><br><span class=\"line\">  <span class=\"string\">`beta_ips`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">1024</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'betaIps'</span>,</span><br><span class=\"line\">  <span class=\"string\">`md5`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">32</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'md5'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_create`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'创建时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'修改时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_user`</span> <span class=\"built_in\">text</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'source user'</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_ip`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'source ip'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'租户字段'</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_configinfobeta_datagrouptenant`</span> (<span class=\"string\">`data_id`</span>,<span class=\"string\">`group_id`</span>,<span class=\"string\">`tenant_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'config_info_beta'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = config_info_tag   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`config_info_tag`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`data_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'data_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`group_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'group_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tenant_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tag_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tag_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`app_name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'app_name'</span>,</span><br><span class=\"line\">  <span class=\"string\">`content`</span> longtext <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'content'</span>,</span><br><span class=\"line\">  <span class=\"string\">`md5`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">32</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'md5'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_create`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'创建时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'修改时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_user`</span> <span class=\"built_in\">text</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'source user'</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_ip`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'source ip'</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_configinfotag_datagrouptenanttag`</span> (<span class=\"string\">`data_id`</span>,<span class=\"string\">`group_id`</span>,<span class=\"string\">`tenant_id`</span>,<span class=\"string\">`tag_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'config_info_tag'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = config_tags_relation   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`config_tags_relation`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tag_name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tag_name'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tag_type`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">64</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tag_type'</span>,</span><br><span class=\"line\">  <span class=\"string\">`data_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'data_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`group_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'group_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tenant_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`nid`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`nid`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_configtagrelation_configidtag`</span> (<span class=\"string\">`id`</span>,<span class=\"string\">`tag_name`</span>,<span class=\"string\">`tag_type`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">KEY</span> <span class=\"string\">`idx_tenant_id`</span> (<span class=\"string\">`tenant_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'config_tag_relation'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = group_capacity   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`group_capacity`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">'主键ID'</span>,</span><br><span class=\"line\">  <span class=\"string\">`group_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'Group ID，空字符表示整个集群'</span>,</span><br><span class=\"line\">  <span class=\"string\">`quota`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'配额，0表示使用默认值'</span>,</span><br><span class=\"line\">  <span class=\"string\">`usage`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'使用量'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_size`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'单个配置大小上限，单位为字节，0表示使用默认值'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_aggr_count`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'聚合子配置最大个数，，0表示使用默认值'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_aggr_size`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_history_count`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'最大变更历史数量'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_create`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'创建时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'修改时间'</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_group_id`</span> (<span class=\"string\">`group_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'集群、各Group容量信息表'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = his_config_info   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`his_config_info`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">64</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`nid`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT,</span><br><span class=\"line\">  <span class=\"string\">`data_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">255</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`group_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`app_name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'app_name'</span>,</span><br><span class=\"line\">  <span class=\"string\">`content`</span> longtext <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`md5`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">32</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_create`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_user`</span> <span class=\"built_in\">text</span>,</span><br><span class=\"line\">  <span class=\"string\">`src_ip`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">20</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`op_type`</span> <span class=\"built_in\">char</span>(<span class=\"number\">10</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'租户字段'</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`nid`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">KEY</span> <span class=\"string\">`idx_gmt_create`</span> (<span class=\"string\">`gmt_create`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">KEY</span> <span class=\"string\">`idx_gmt_modified`</span> (<span class=\"string\">`gmt_modified`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">KEY</span> <span class=\"string\">`idx_did`</span> (<span class=\"string\">`data_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'多租户改造'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"comment\">/*   数据库全名 = nacos_config   */</span></span><br><span class=\"line\"><span class=\"comment\">/*   表名称 = tenant_capacity   */</span></span><br><span class=\"line\"><span class=\"comment\">/******************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`tenant_capacity`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">'主键ID'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'Tenant ID'</span>,</span><br><span class=\"line\">  <span class=\"string\">`quota`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'配额，0表示使用默认值'</span>,</span><br><span class=\"line\">  <span class=\"string\">`usage`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'使用量'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_size`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'单个配置大小上限，单位为字节，0表示使用默认值'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_aggr_count`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'聚合子配置最大个数'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_aggr_size`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'单个聚合数据的子配置大小上限，单位为字节，0表示使用默认值'</span>,</span><br><span class=\"line\">  <span class=\"string\">`max_history_count`</span> <span class=\"built_in\">int</span>(<span class=\"number\">10</span>) <span class=\"keyword\">unsigned</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'0'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'最大变更历史数量'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_create`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'创建时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> datetime <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">DEFAULT</span> <span class=\"string\">'2010-05-05 00:00:00'</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'修改时间'</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_tenant_id`</span> (<span class=\"string\">`tenant_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'租户容量信息表'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"string\">`tenant_info`</span> (</span><br><span class=\"line\">  <span class=\"string\">`id`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> AUTO_INCREMENT <span class=\"keyword\">COMMENT</span> <span class=\"string\">'id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`kp`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'kp'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_id`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">default</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tenant_id'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_name`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">128</span>) <span class=\"keyword\">default</span> <span class=\"string\">''</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tenant_name'</span>,</span><br><span class=\"line\">  <span class=\"string\">`tenant_desc`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">256</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'tenant_desc'</span>,</span><br><span class=\"line\">  <span class=\"string\">`create_source`</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">32</span>) <span class=\"keyword\">DEFAULT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'create_source'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_create`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'创建时间'</span>,</span><br><span class=\"line\">  <span class=\"string\">`gmt_modified`</span> <span class=\"built_in\">bigint</span>(<span class=\"number\">20</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> <span class=\"keyword\">COMMENT</span> <span class=\"string\">'修改时间'</span>,</span><br><span class=\"line\">  PRIMARY <span class=\"keyword\">KEY</span> (<span class=\"string\">`id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">UNIQUE</span> <span class=\"keyword\">KEY</span> <span class=\"string\">`uk_tenant_info_kptenantid`</span> (<span class=\"string\">`kp`</span>,<span class=\"string\">`tenant_id`</span>),</span><br><span class=\"line\">  <span class=\"keyword\">KEY</span> <span class=\"string\">`idx_tenant_id`</span> (<span class=\"string\">`tenant_id`</span>)</span><br><span class=\"line\">) <span class=\"keyword\">ENGINE</span>=<span class=\"keyword\">InnoDB</span> <span class=\"keyword\">DEFAULT</span> <span class=\"keyword\">CHARSET</span>=utf8 <span class=\"keyword\">COLLATE</span>=utf8_bin <span class=\"keyword\">COMMENT</span>=<span class=\"string\">'tenant_info'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">users</span> (</span><br><span class=\"line\">\tusername <span class=\"built_in\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span> PRIMARY <span class=\"keyword\">KEY</span>,</span><br><span class=\"line\">\t<span class=\"keyword\">password</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">500</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">\tenabled <span class=\"built_in\">boolean</span> <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span></span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> <span class=\"keyword\">roles</span> (</span><br><span class=\"line\">\tusername <span class=\"built_in\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">\t<span class=\"keyword\">role</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">\t<span class=\"keyword\">constraint</span> uk_username_role <span class=\"keyword\">UNIQUE</span> (username,<span class=\"keyword\">role</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> permissions (</span><br><span class=\"line\">    <span class=\"keyword\">role</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">50</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">    <span class=\"keyword\">resource</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">512</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">    <span class=\"keyword\">action</span> <span class=\"built_in\">varchar</span>(<span class=\"number\">8</span>) <span class=\"keyword\">NOT</span> <span class=\"literal\">NULL</span>,</span><br><span class=\"line\">    <span class=\"keyword\">constraint</span> uk_role_permission <span class=\"keyword\">UNIQUE</span> (<span class=\"keyword\">role</span>,<span class=\"keyword\">resource</span>,<span class=\"keyword\">action</span>)</span><br><span class=\"line\">);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"keyword\">users</span> (username, <span class=\"keyword\">password</span>, enabled) <span class=\"keyword\">VALUES</span> (<span class=\"string\">'nacos'</span>, <span class=\"string\">'$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu'</span>, <span class=\"literal\">TRUE</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">INSERT</span> <span class=\"keyword\">INTO</span> <span class=\"keyword\">roles</span> (username, <span class=\"keyword\">role</span>) <span class=\"keyword\">VALUES</span> (<span class=\"string\">'nacos'</span>, <span class=\"string\">'ROLE_ADMIN'</span>);</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改配置\"><a href=\"#修改配置\" class=\"headerlink\" title=\"修改配置\"></a>修改配置</h4><p>application.properties 内容替换为<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">spring</span></span><br><span class=\"line\"></span><br><span class=\"line\">server.contextPath=/nacos</span><br><span class=\"line\">server.servlet.contextPath=/nacos</span><br><span class=\"line\">server.port=8848</span><br><span class=\"line\">management.metrics.export.elastic.enabled=false</span><br><span class=\"line\">management.metrics.export.influx.enabled=false</span><br><span class=\"line\">server.tomcat.accesslog.enabled=true</span><br><span class=\"line\">server.tomcat.accesslog.pattern=%h %l %u %t \"%r\" %s %b %D %&#123;User-Agent&#125;i</span><br><span class=\"line\">server.tomcat.basedir=</span><br><span class=\"line\">nacos.security.ignore.urls=/,/**/*.css,/**/*.js,/**/*.html,/**/*.map,/**/*.svg,/**/*.png,/**/*.ico,/console-fe/public/**,/v1/auth/login,/v1/console/health/**,/v1/cs/**,/v1/ns/**,/v1/cmdb/**,/actuator/**,/v1/console/server/**</span><br><span class=\"line\">spring.datasource.platform=mysql</span><br><span class=\"line\">db.num=1</span><br><span class=\"line\">db.url.0=jdbc:mysql://&lt;ip&gt;:&lt;port&gt;/nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true</span><br><span class=\"line\">db.user=root</span><br><span class=\"line\">db.password=password</span><br></pre></td></tr></table></figure></p>","next":{"title":"Windows下SQLSERVER数据库自动备份","path":"api/articles/resource-DB-SQLServer-DB-bak.json","image":"/img/header_img/DB/SQLServerBAK.png","num_read":249,"num_like":955,"num_collection":406,"num_comments":179},"prev":{"title":"基于docker 搭建Prometheus+Grafana","path":"api/articles/resource-RPC-Docker-Centos-Docker-Prometheus-Grafana.json","image":"/img/header_img/docker/docker.jpg","num_read":51,"num_like":201,"num_collection":584,"num_comments":73},"categories":[{"name":"RPC远程调用","path":"api/categories/RPC远程调用.json","pathContent":"api/categories/RPC远程调用","description":"RPC（Remote Procedure Call）远程过程调用，简单的理解是一个节点请求另一个节点提供的服务","cover":"https://sunfy9.gitee.io/project/photo/project/rpc.jpg"}],"tags":[{"name":"nacos","path":"api/tags/nacos.json","pathContent":"api/tags/nacos","description":"[nacos]暂未设置说明","cover":"https://sunfy9.gitee.io/img/header_img/sunfy-default.png"},{"name":"Docker","path":"api/tags/Docker.json","pathContent":"api/tags/Docker","description":"一个开源的应用容器引擎。","cover":"https://sunfy9.gitee.io/img/header_img/sunfy-default.png"},{"name":"springCloud-alibaba","path":"api/tags/springCloud-alibaba.json","pathContent":"api/tags/springCloud-alibaba","description":"[springCloud-alibaba]暂未设置说明","cover":"https://sunfy9.gitee.io/img/header_img/sunfy-default.png"}]}