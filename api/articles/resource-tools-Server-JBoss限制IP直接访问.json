{"title":"JBoss限制IP直接访问","num_read":1394,"num_like":520,"num_collection":329,"num_comments":262,"slug":"resource-tools-Server-JBoss限制IP直接访问","date":"2022-03-27T16:00:00.000Z","img":"/img/header_img/server/JBossIp.png","_id":"clhrbp2i500lho5lgdnje64dw","site":{"data":{}},"updated":"2022-07-20T06:47:20.000Z","comments":true,"path":"api/articles/resource-tools-Server-JBoss限制IP直接访问.json","webPath":"2022/03/28/resource-tools-Server-JBoss限制IP直接访问/","permalink":"https://sunfy9.gitee.io/2022/03/28/resource-tools-Server-JBoss%E9%99%90%E5%88%B6IP%E7%9B%B4%E6%8E%A5%E8%AE%BF%E9%97%AE/","excerpt":null,"covers":null,"keywords":"sunfy, hexo-theme-snail","content":"<p>cd /your_install_dir/jbossweb-tomcat50.sar/<br>/bin/cp server.xml server.xml.100323<br>vi server.xml</p>\n<p>先修改默认的8080端口</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Service</span> <span class=\"attr\">name</span>=<span class=\"string\">\"jboss.web\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">className</span>=<span class=\"string\">\"org.jboss.web.tomcat.tc5.StandardService\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- A HTTP/1.1 Connector on port 8080 --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- The compression parameters are taken from the default Tomcat server.xml--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Connector</span> <span class=\"attr\">port</span>=<span class=\"string\">\"8080\"</span> <span class=\"attr\">address</span>=<span class=\"string\">\"$&#123;jboss.bind.address&#125;\"</span></span></span><br></pre></td></tr></table></figure>\n<p>将port=”8080”修改为port=”8888”</p>\n<p>禁止通过IP访问，只允许通过域名访问</p>\n<p>在</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Host</span> <span class=\"attr\">name</span>=<span class=\"string\">\"localhost\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">autoDeploy</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">deployOnStartup</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">deployXML</span>=<span class=\"string\">\"false\"</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>前添加一个IP命名的virtual host</p>\n<p>假如服务器IP是192.168.0.100，则添加的host如下</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- </span></span><br><span class=\"line\"><span class=\"comment\">设置文件的地址  %JBOSSHOME%\\server\\default\\deploy\\jboss-web.deployer\\server.xml</span></span><br><span class=\"line\"><span class=\"comment\">此处name设置为要限制的ip地址（可以是内网ip也可以是外网ip）,设置后，将无法通过该IP直接访问项目 </span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Host</span> <span class=\"attr\">name</span>=<span class=\"string\">\"192.168.0.100\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">Valve</span> <span class=\"attr\">className</span>=<span class=\"string\">\"org.apache.catalina.valves.RemoteAddrValve\"</span> <span class=\"attr\">deny</span>=<span class=\"string\">\"0.0.0.0\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Host</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>现在启动Jboss，就不能通过IP访问了，只能通过域名，但任何解析到192.168.0.100的域名都可以访问<br>有机会再研究下只绑定一个域名的情况</p>\n","more":"<p>cd /your_install_dir/jbossweb-tomcat50.sar/<br>/bin/cp server.xml server.xml.100323<br>vi server.xml</p>\n<p>先修改默认的8080端口</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Service</span> <span class=\"attr\">name</span>=<span class=\"string\">\"jboss.web\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">className</span>=<span class=\"string\">\"org.jboss.web.tomcat.tc5.StandardService\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- A HTTP/1.1 Connector on port 8080 --&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- The compression parameters are taken from the default Tomcat server.xml--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Connector</span> <span class=\"attr\">port</span>=<span class=\"string\">\"8080\"</span> <span class=\"attr\">address</span>=<span class=\"string\">\"$&#123;jboss.bind.address&#125;\"</span></span></span><br></pre></td></tr></table></figure>\n<p>将port=”8080”修改为port=”8888”</p>\n<p>禁止通过IP访问，只允许通过域名访问</p>\n<p>在</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Host</span> <span class=\"attr\">name</span>=<span class=\"string\">\"localhost\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">autoDeploy</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">deployOnStartup</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">deployXML</span>=<span class=\"string\">\"false\"</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>前添加一个IP命名的virtual host</p>\n<p>假如服务器IP是192.168.0.100，则添加的host如下</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- </span></span><br><span class=\"line\"><span class=\"comment\">设置文件的地址  %JBOSSHOME%\\server\\default\\deploy\\jboss-web.deployer\\server.xml</span></span><br><span class=\"line\"><span class=\"comment\">此处name设置为要限制的ip地址（可以是内网ip也可以是外网ip）,设置后，将无法通过该IP直接访问项目 </span></span><br><span class=\"line\"><span class=\"comment\">--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Host</span> <span class=\"attr\">name</span>=<span class=\"string\">\"192.168.0.100\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">Valve</span> <span class=\"attr\">className</span>=<span class=\"string\">\"org.apache.catalina.valves.RemoteAddrValve\"</span> <span class=\"attr\">deny</span>=<span class=\"string\">\"0.0.0.0\"</span>/&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">Host</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>现在启动Jboss，就不能通过IP访问了，只能通过域名，但任何解析到192.168.0.100的域名都可以访问<br>有机会再研究下只绑定一个域名的情况</p>\n","next":{"title":"如何在Spring生态中玩转RocketMQ？","path":"api/articles/resource-MQ-RocketMQ-RocketMQ.json","image":"/img/header_img/MQ/RocketMQ.png","num_read":391,"num_like":794,"num_collection":822,"num_comments":25},"prev":{"title":"JBoss7多数据源配置","path":"api/articles/resource-tools-Server-JBoss7多数据源配置.json","image":"/img/header_img/server/jbossDB.png","num_read":1132,"num_like":781,"num_collection":173,"num_comments":111},"categories":[{"name":"应用服务器","path":"api/categories/应用服务器.json","pathContent":"api/categories/应用服务器","description":"一种具有一定逻辑关系，在计算机中应用某种存储结构，并且封装了相应操作的数据元素集合。","cover":"https://sunfy9.gitee.io/project/photo/project/server.jpg"}],"tags":[{"name":"https","path":"api/tags/https.json","pathContent":"api/tags/https","description":"[https]暂未设置说明","cover":"https://sunfy9.gitee.io/img/header_img/sunfy-default.png"}]}