{"title":"Centos 安装 Jenkins","num_read":486,"num_like":770,"num_collection":684,"num_comments":224,"slug":"resource-system-Linux-Centos-jenkins","date":"2021-01-01T16:00:00.000Z","img":"/img/header_img/15.gif","_id":"clhrbp2g900kao5lg5lvk4n44","project":"Linux","site":{"data":{}},"updated":"2022-09-20T02:22:25.170Z","author":"Sunfy","comments":true,"path":"api/articles/resource-system-Linux-Centos-jenkins.json","webPath":"2021/01/02/resource-system-Linux-Centos-jenkins/","permalink":"https://sunfy9.gitee.io/2021/01/02/resource-system-Linux-Centos-jenkins/","excerpt":"CentOS安装Jenkins","covers":["../../../../img/Centos-jenkins/16bbaeef5be99df4"],"keywords":"sunfy, hexo-theme-snail","content":"<p>CentOS安装Jenkins<a id=\"more\"></a></p>\n<h2 id=\"一、Java-jdk-安装\"><a href=\"#一、Java-jdk-安装\" class=\"headerlink\" title=\"一、Java jdk 安装\"></a>一、Java jdk 安装</h2><blockquote>\n<p>安装之前先检查一下系统有没有自带open-jdk</p>\n</blockquote>\n<p>命令：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -qa |grep java复制代码</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -qa |grep jdk复制代码</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -qa |grep gcj</span><br><span class=\"line\">复制代码</span><br></pre></td></tr></table></figure>\n<p>如果没有输入信息表示没有安装。<sunfy-line></p>\n<p>如果安装可以使用<code>rpm -qa | grep java | xargs rpm -e --nodeps</code> 批量卸载所有带有Java的文件   这句命令的关键字是java</p>\n<p>首先检索包含java的列表</p>\n<p><code>yum list java*</code></p>\n<p>检索1.8的列表</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum list java-1.8*</span><br></pre></td></tr></table></figure>\n<p>安装1.8.0的所有文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install java-1.8.0-openjdk* -y</span><br></pre></td></tr></table></figure>\n<p>使用命令检查是否安装成功</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -version</span><br></pre></td></tr></table></figure>\n<p>到此安装结束了。这样安装有一个好处就是不需要对path进行设置，自动就设置好了</p>\n<h2 id=\"二、jenkins安装和配置\"><a href=\"#二、jenkins安装和配置\" class=\"headerlink\" title=\"二、jenkins安装和配置\"></a>二、jenkins安装和配置</h2><h3 id=\"安装-jenkins\"><a href=\"#安装-jenkins\" class=\"headerlink\" title=\"安装 jenkins\"></a>安装 jenkins</h3><p>\\1. 下载依赖</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo wget -O &#x2F;etc&#x2F;yum.repos.d&#x2F;jenkins.repo https:&#x2F;&#x2F;pkg.jenkins.io&#x2F;redhat-stable&#x2F;jenkins.repo</span><br></pre></td></tr></table></figure>\n<p>\\2. 导入秘钥</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo rpm --import https:&#x2F;&#x2F;pkg.jenkins.io&#x2F;redhat-stable&#x2F;jenkins.io.key</span><br></pre></td></tr></table></figure>\n<p>\\3. 安装</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install jenkins</span><br></pre></td></tr></table></figure>\n<p>\\4. 查找jenkins安装路径</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ql jenkins</span><br></pre></td></tr></table></figure>\n<p>jenkins相关目录释义：</p>\n<ul>\n<li><code>/usr/lib/jenkins/</code>：jenkins安装目录，war包会放在这里</li>\n<li><code>/etc/sysconfig/jenkins</code>：jenkins配置文件，“端口”，“JENKINS_HOME”等都可以在这里配置。</li>\n<li><code>/var/lib/jenkins/</code>：默认的JENKINS_HOME。</li>\n<li><code>/var/log/jenkins/jenkins.log</code>：jenkins日志文件。</li>\n</ul>\n<h3 id=\"初始化-jenkins服务器\"><a href=\"#初始化-jenkins服务器\" class=\"headerlink\" title=\"初始化 jenkins服务器\"></a>初始化 jenkins服务器</h3><p>\\1. 编辑 jenkins 配置文件</p>\n<blockquote>\n<p>为了不因为权限出现各种问题，这里直接修改用户为root。</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;etc&#x2F;sysconfig&#x2F;jenkins</span><br><span class=\"line\"> $JENKINS_USER&#x3D;&quot;root&quot;</span><br></pre></td></tr></table></figure>\n<p>\\2. 修改 jenkins 端口</p>\n<blockquote>\n<p>若默认8080端口未被占用，可不修改。若端口已被占用，则修改端口为其他端口，并将对应端口开放。</p>\n</blockquote>\n<p>\\3. 启动 jenkins</p>\n<blockquote>\n<p>推荐用 screen 工具启动 jenkins 服务，可以后台运行，不用担心远程端口关闭导致服务停止。screen 具体用法这里就不展开了，可以参考：<a href=\"https://juejin.im/post/6844903880036204557\" target=\"_blank\" rel=\"noopener\">juejin.im/post/684490…</a></p>\n</blockquote>\n<p>启动 jenkins</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar &#x2F;usr&#x2F;lib&#x2F;jenkins&#x2F;jenkins.war --httpPort&#x3D;8899</span><br></pre></td></tr></table></figure>\n<p>使用 screen 启动 jenkins （jenkins1是为jenkins服务创建的会话名称）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">screen -S jenkins1 java -jar &#x2F;usr&#x2F;lib&#x2F;jenkins&#x2F;jenkins.war --httpPort&#x3D;8899</span><br></pre></td></tr></table></figure>\n<p>分离屏幕后台运行 jenkins：</p>\n<p>先按 <strong>control + A</strong> ，再按 <strong>D</strong></p>\n<p>列出当前所有的 session：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">screen -ls</span><br></pre></td></tr></table></figure>\n<p>可以查看到在后台运行的 jenkins 服务，即便服务器 logout 了，Jenkins 服务依然可以使用。</p>\n<p><img src=\"../../../../img/Centos-jenkins/16bbaeef5be99df4\" alt=\"img\"></p>\n<p>\\4. 访问 jenkins 地址</p>\n<p>浏览器输入： <a href=\"http://[服务器ip地址]:[端口号\">http://[服务器ip地址]:[端口号</a>]</p>\n<p>若启动成功，会出现解锁 jenkins 页面。</p>\n<p>输入命令获取密码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat &#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;secrets&#x2F;initialAdminPassword</span><br></pre></td></tr></table></figure>\n<p>然后按照页面一步步操作即可：解锁jenkins -&gt; 安装推荐的插件 -&gt; 创建第一个管理员账号</p>\n<p>创建管理员账号这一步，也可以直接选择使用admin账号，需要输入上面获取到的密码。</p>\n<p>接下来就可以使用jenkins了。</p>\n","more":"</p>\n<h2 id=\"一、Java-jdk-安装\"><a href=\"#一、Java-jdk-安装\" class=\"headerlink\" title=\"一、Java jdk 安装\"></a>一、Java jdk 安装</h2><blockquote>\n<p>安装之前先检查一下系统有没有自带open-jdk</p>\n</blockquote>\n<p>命令：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -qa |grep java复制代码</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -qa |grep jdk复制代码</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -qa |grep gcj</span><br><span class=\"line\">复制代码</span><br></pre></td></tr></table></figure>\n<p>如果没有输入信息表示没有安装。<sunfy-line></p>\n<p>如果安装可以使用<code>rpm -qa | grep java | xargs rpm -e --nodeps</code> 批量卸载所有带有Java的文件   这句命令的关键字是java</p>\n<p>首先检索包含java的列表</p>\n<p><code>yum list java*</code></p>\n<p>检索1.8的列表</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum list java-1.8*</span><br></pre></td></tr></table></figure>\n<p>安装1.8.0的所有文件</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install java-1.8.0-openjdk* -y</span><br></pre></td></tr></table></figure>\n<p>使用命令检查是否安装成功</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -version</span><br></pre></td></tr></table></figure>\n<p>到此安装结束了。这样安装有一个好处就是不需要对path进行设置，自动就设置好了</p>\n<h2 id=\"二、jenkins安装和配置\"><a href=\"#二、jenkins安装和配置\" class=\"headerlink\" title=\"二、jenkins安装和配置\"></a>二、jenkins安装和配置</h2><h3 id=\"安装-jenkins\"><a href=\"#安装-jenkins\" class=\"headerlink\" title=\"安装 jenkins\"></a>安装 jenkins</h3><p>\\1. 下载依赖</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo wget -O &#x2F;etc&#x2F;yum.repos.d&#x2F;jenkins.repo https:&#x2F;&#x2F;pkg.jenkins.io&#x2F;redhat-stable&#x2F;jenkins.repo</span><br></pre></td></tr></table></figure>\n<p>\\2. 导入秘钥</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo rpm --import https:&#x2F;&#x2F;pkg.jenkins.io&#x2F;redhat-stable&#x2F;jenkins.io.key</span><br></pre></td></tr></table></figure>\n<p>\\3. 安装</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install jenkins</span><br></pre></td></tr></table></figure>\n<p>\\4. 查找jenkins安装路径</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rpm -ql jenkins</span><br></pre></td></tr></table></figure>\n<p>jenkins相关目录释义：</p>\n<ul>\n<li><code>/usr/lib/jenkins/</code>：jenkins安装目录，war包会放在这里</li>\n<li><code>/etc/sysconfig/jenkins</code>：jenkins配置文件，“端口”，“JENKINS_HOME”等都可以在这里配置。</li>\n<li><code>/var/lib/jenkins/</code>：默认的JENKINS_HOME。</li>\n<li><code>/var/log/jenkins/jenkins.log</code>：jenkins日志文件。</li>\n</ul>\n<h3 id=\"初始化-jenkins服务器\"><a href=\"#初始化-jenkins服务器\" class=\"headerlink\" title=\"初始化 jenkins服务器\"></a>初始化 jenkins服务器</h3><p>\\1. 编辑 jenkins 配置文件</p>\n<blockquote>\n<p>为了不因为权限出现各种问题，这里直接修改用户为root。</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;etc&#x2F;sysconfig&#x2F;jenkins</span><br><span class=\"line\"> $JENKINS_USER&#x3D;&quot;root&quot;</span><br></pre></td></tr></table></figure>\n<p>\\2. 修改 jenkins 端口</p>\n<blockquote>\n<p>若默认8080端口未被占用，可不修改。若端口已被占用，则修改端口为其他端口，并将对应端口开放。</p>\n</blockquote>\n<p>\\3. 启动 jenkins</p>\n<blockquote>\n<p>推荐用 screen 工具启动 jenkins 服务，可以后台运行，不用担心远程端口关闭导致服务停止。screen 具体用法这里就不展开了，可以参考：<a href=\"https://juejin.im/post/6844903880036204557\" target=\"_blank\" rel=\"noopener\">juejin.im/post/684490…</a></p>\n</blockquote>\n<p>启动 jenkins</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar &#x2F;usr&#x2F;lib&#x2F;jenkins&#x2F;jenkins.war --httpPort&#x3D;8899</span><br></pre></td></tr></table></figure>\n<p>使用 screen 启动 jenkins （jenkins1是为jenkins服务创建的会话名称）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">screen -S jenkins1 java -jar &#x2F;usr&#x2F;lib&#x2F;jenkins&#x2F;jenkins.war --httpPort&#x3D;8899</span><br></pre></td></tr></table></figure>\n<p>分离屏幕后台运行 jenkins：</p>\n<p>先按 <strong>control + A</strong> ，再按 <strong>D</strong></p>\n<p>列出当前所有的 session：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">screen -ls</span><br></pre></td></tr></table></figure>\n<p>可以查看到在后台运行的 jenkins 服务，即便服务器 logout 了，Jenkins 服务依然可以使用。</p>\n<p><img src=\"../../../../img/Centos-jenkins/16bbaeef5be99df4\" alt=\"img\"></p>\n<p>\\4. 访问 jenkins 地址</p>\n<p>浏览器输入： <a href=\"http://[服务器ip地址]:[端口号\">http://[服务器ip地址]:[端口号</a>]</p>\n<p>若启动成功，会出现解锁 jenkins 页面。</p>\n<p>输入命令获取密码</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat &#x2F;var&#x2F;lib&#x2F;jenkins&#x2F;secrets&#x2F;initialAdminPassword</span><br></pre></td></tr></table></figure>\n<p>然后按照页面一步步操作即可：解锁jenkins -&gt; 安装推荐的插件 -&gt; 创建第一个管理员账号</p>\n<p>创建管理员账号这一步，也可以直接选择使用admin账号，需要输入上面获取到的密码。</p>\n<p>接下来就可以使用jenkins了。</p>","next":{"title":"RabbitMQ主要工作模式","path":"api/articles/resource-MQ-rabbitMQ-RabbitMQWokers.json","image":"/img/header_img/MQ/rabbitmq.PNG","num_read":1795,"num_like":581,"num_collection":310,"num_comments":145},"prev":{"title":"Linux系统下VMware kernel Module Updater弹框，Install失败","path":"api/articles/resource-system-Linux-VmWarekernelModuleUpdater.json","image":"/img/header_img/15.gif","num_read":986,"num_like":217,"num_collection":655,"num_comments":113},"categories":[{"name":"操作系统","path":"api/categories/操作系统.json","pathContent":"api/categories/操作系统","description":"包含CentOS、Ubuntu、Windows等相关","cover":"https://sunfy9.gitee.io/img/header_img/sunfy-default.png"}],"tags":[{"name":"CentOS","path":"api/tags/CentOS.json","pathContent":"api/tags/CentOS","description":"免费的、开源的、可以重新分发的开源操作系统","cover":"https://sunfy9.gitee.io/img/header_img/windows/centos.png"},{"name":"Jenkins","path":"api/tags/Jenkins.json","pathContent":"api/tags/Jenkins","description":"[Jenkins]暂未设置说明","cover":"https://sunfy9.gitee.io/img/header_img/sunfy-default.png"}]}